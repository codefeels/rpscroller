import{l as z,m as O,t as S,o as F,p as g,q as N,v as p,w as y,x as I,y as M,u as R,r as D,i as L,j as s,B as v,z as A,n as B}from"./index-CVCc6gaK.js";import{c as T,F as b,a as k}from"./index-DKjRxS7_.js";import{B as U}from"./BaseDialog-D_CobCeT.js";function V(c,o,t){const C=I(),n=(t==null?void 0:t.locale)??C.locale??z,x=O(c,o);if(isNaN(x))throw new RangeError("Invalid time value");const i=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:x});let d,l;x>0?(d=S(o),l=S(c)):(d=S(c),l=S(o));const r=F((t==null?void 0:t.roundingMethod)??"round"),u=l.getTime()-d.getTime(),m=u/M,w=g(l)-g(d),h=(u-w)/M,j=t==null?void 0:t.unit;let a;if(j?a=j:m<1?a="second":m<60?a="minute":m<N?a="hour":h<p?a="day":h<y?a="month":a="year",a==="second"){const e=r(u/1e3);return n.formatDistance("xSeconds",e,i)}else if(a==="minute"){const e=r(m);return n.formatDistance("xMinutes",e,i)}else if(a==="hour"){const e=r(m/60);return n.formatDistance("xHours",e,i)}else if(a==="day"){const e=r(h/N);return n.formatDistance("xDays",e,i)}else if(a==="month"){const e=r(h/p);return e===12&&j!=="month"?n.formatDistance("xYears",1,i):n.formatDistance("xMonths",e,i)}else{const e=r(h/y);return n.formatDistance("xYears",e,i)}}function E(c,o){return V(c,T(c),o)}function _({open:c,onClose:o}){const t=R(),{favorites:C}=t,[n,x]=D.useState([]),[i,d]=D.useState(-1),[l,r]=D.useState(0),[u,m]=D.useState(""),[w,h]=D.useState(!0),j=`/r/${n.map(e=>e.replace("user/","u_").replace("r/","")).join("+")}`,a=[...C.filter(e=>!L(e.name)).sort((e,f)=>e.name.toLowerCase().localeCompare(f.name.toLowerCase())),...C.filter(e=>L(e.name)).sort((e,f)=>e.name.toLowerCase().localeCompare(f.name.toLowerCase()))].map(e=>({...e,dateAdded:new Date(e.dateAdded)})).sort((e,f)=>(e.visitedCount-f.visitedCount)*i).sort((e,f)=>(+e.dateAdded-+f.dateAdded)*l);return s.jsx(U,{open:c,onClose:o,children:w?s.jsxs("div",{children:[s.jsxs("h4",{children:["Make multi-reddit",s.jsx("div",{children:s.jsxs("div",{children:[s.jsx("input",{id:"multireddit",readOnly:!0,type:"text",value:j}),s.jsx(v,{onClick:()=>{h(!1)},children:"Create list"}),s.jsx(v,{onClick:()=>{x([])},children:"Clear"})]})})]}),s.jsx("div",{className:"max-h-[80vh] overflow-auto",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{r(0),d(i===0?-1:i===-1?1:0)},children:["# Visits"," ",i===1?s.jsx(b,{className:"inline"}):i===-1?s.jsx(k,{className:"inline"}):null]})}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{d(0),r(l===0?-1:l===-1?1:0)},children:["Date added"," ",l===1?s.jsx(b,{className:"inline"}):l===-1?s.jsx(k,{className:"inline"}):null]})})]})}),s.jsx("tbody",{children:a.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"whitespace-nowrap",children:s.jsx(v,{onClick:()=>{n.includes(A(e.name))||x([...n,A(e.name)])},children:B(e.name)})}),s.jsx("td",{children:e.visitedCount}),s.jsx("td",{children:E(e.dateAdded,{addSuffix:!0})})]},e.name))})]})})]}):s.jsx("div",{className:"m-8",children:s.jsx("form",{onSubmit:e=>{e.preventDefault(),u&&(t.addList(j,u),o())},children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"listname",children:"List name:"}),s.jsx("input",{autoFocus:!0,id:"listname",type:"text",value:u,onChange:e=>{m(e.target.value)}}),s.jsx(v,{type:"submit",children:"Submit"})]})})})})}export{_ as default};
//# sourceMappingURL=MakeMultiRedditDialog-Ck75AOCb.js.map
