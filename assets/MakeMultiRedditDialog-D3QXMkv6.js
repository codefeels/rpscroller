import{u as k,r as D,i as g,j as s,a as w,n as z}from"./index-BP-Ik0-s.js";import{c as O,F as N,a as M}from"./index-EkhLeAlQ.js";import{B as v}from"./Button-Do9Y_WjI.js";import{B as F}from"./BaseDialog-Cc3Zc_os.js";import{e as I,c as B,n as R,g as T,a as p,m as y,b,d as A,f as U,h as L}from"./en-US-B-_Iw2qi.js";import"./util-DZW1Yq4O.js";function V(l,d,t){const C=U(),i=(t==null?void 0:t.locale)??C.locale??I,x=B(l,d);if(isNaN(x))throw new RangeError("Invalid time value");const n=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:x}),[o,c]=R(t==null?void 0:t.in,...x>0?[d,l]:[l,d]),r=T((t==null?void 0:t.roundingMethod)??"round"),m=c.getTime()-o.getTime(),u=m/L,S=p(c)-p(o),h=(m-S)/L,j=t==null?void 0:t.unit;let a;if(j?a=j:u<1?a="second":u<60?a="minute":u<y?a="hour":h<b?a="day":h<A?a="month":a="year",a==="second"){const e=r(m/1e3);return i.formatDistance("xSeconds",e,n)}else if(a==="minute"){const e=r(u);return i.formatDistance("xMinutes",e,n)}else if(a==="hour"){const e=r(u/60);return i.formatDistance("xHours",e,n)}else if(a==="day"){const e=r(h/y);return i.formatDistance("xDays",e,n)}else if(a==="month"){const e=r(h/b);return e===12&&j!=="month"?i.formatDistance("xYears",1,n):i.formatDistance("xMonths",e,n)}else{const e=r(h/A);return i.formatDistance("xYears",e,n)}}function E(l,d){return V(l,O(l),d)}function J({open:l,onClose:d}){const t=k(),{favorites:C}=t,[i,x]=D.useState([]),[n,o]=D.useState(-1),[c,r]=D.useState(0),[m,u]=D.useState(""),[S,h]=D.useState(!0),j=`/r/${i.map(e=>e.replace("user/","u_").replace("r/","")).join("+")}`,a=[...C.filter(e=>!g(e.name)).sort((e,f)=>e.name.toLowerCase().localeCompare(f.name.toLowerCase())),...C.filter(e=>g(e.name)).sort((e,f)=>e.name.toLowerCase().localeCompare(f.name.toLowerCase()))].map(e=>({...e,dateAdded:new Date(e.dateAdded)})).sort((e,f)=>(e.visitedCount-f.visitedCount)*n).sort((e,f)=>(+e.dateAdded-+f.dateAdded)*c);return s.jsx(F,{open:l,onClose:d,children:S?s.jsxs("div",{children:[s.jsxs("h4",{children:["Make multi-reddit",s.jsx("div",{children:s.jsxs("div",{children:[s.jsx("input",{id:"multireddit",readOnly:!0,type:"text",value:j}),s.jsx(v,{onClick:()=>{h(!1)},children:"Create list"}),s.jsx(v,{onClick:()=>{x([])},children:"Clear"})]})})]}),s.jsx("div",{className:"max-h-[80vh] overflow-auto",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{r(0),o(n===0?-1:n===-1?1:0)},children:["# Visits"," ",n===1?s.jsx(N,{className:"inline"}):n===-1?s.jsx(M,{className:"inline"}):null]})}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{o(0),r(c===0?-1:c===-1?1:0)},children:["Date added"," ",c===1?s.jsx(N,{className:"inline"}):c===-1?s.jsx(M,{className:"inline"}):null]})})]})}),s.jsx("tbody",{children:a.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"whitespace-nowrap",children:s.jsx(v,{onClick:()=>{i.includes(w(e.name))||x([...i,w(e.name)])},children:z(e.name)})}),s.jsx("td",{children:e.visitedCount}),s.jsx("td",{children:E(e.dateAdded,{addSuffix:!0})})]},e.name))})]})})]}):s.jsx("div",{className:"m-8",children:s.jsx("form",{onSubmit:e=>{e.preventDefault(),m&&(t.addList(j,m),d())},children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"listname",children:"List name:"}),s.jsx("input",{autoFocus:!0,id:"listname",type:"text",value:m,onChange:e=>{u(e.target.value)}}),s.jsx(v,{type:"submit",children:"Submit"})]})})})})}export{J as default};
//# sourceMappingURL=MakeMultiRedditDialog-D3QXMkv6.js.map
