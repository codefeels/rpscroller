import{u as A,r as S,j as n,B as x,L as F,n as X,e as C,I as O}from"./index-CUolLGfm.js";import{B as _,c as v,d as y}from"./BaseDialog-rdzSPy43.js";import{n as N,t as j,c as g,g as T,a as I,b as Y,e as k,m as b,d as M,f as H}from"./en-US-DK8Z8mF7.js";function L(r,i,e){const[l,t]=N(e==null?void 0:e.in,r,i),m=l.getFullYear()-t.getFullYear(),o=l.getMonth()-t.getMonth();return m*12+o}function z(r,i){return+j(r)-+j(i)}function B(r,i){const e=j(r);return e.setHours(23,59,59,999),e}function E(r,i){const e=j(r),l=e.getMonth();return e.setFullYear(e.getFullYear(),l+1,0),e.setHours(23,59,59,999),e}function V(r,i){const e=j(r);return+B(e)==+E(e)}function R(r,i,e){const[l,t,m]=N(e==null?void 0:e.in,r,r,i),o=g(t,m),a=Math.abs(L(t,m));if(a<1)return 0;t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-o*a);let d=g(t,m)===-o;V(l)&&a===1&&g(l,m)===1&&(d=!1);const u=o*(a-+d);return u===0?0:u}function U(r,i,e){const l=z(r,i)/1e3;return T(e==null?void 0:e.roundingMethod)(l)}function P(r,i,e){const l=Y(),t=(e==null?void 0:e.locale)??l.locale??k,m=2520,o=g(r,i);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:o}),[d,u]=N(e==null?void 0:e.in,...o>0?[i,r]:[r,i]),f=U(u,d),w=(I(u)-I(d))/1e3,s=Math.round((f-w)/60);let c;if(s<2)return e!=null&&e.includeSeconds?f<5?t.formatDistance("lessThanXSeconds",5,a):f<10?t.formatDistance("lessThanXSeconds",10,a):f<20?t.formatDistance("lessThanXSeconds",20,a):f<40?t.formatDistance("halfAMinute",0,a):f<60?t.formatDistance("lessThanXMinutes",1,a):t.formatDistance("xMinutes",1,a):s===0?t.formatDistance("lessThanXMinutes",1,a):t.formatDistance("xMinutes",s,a);if(s<45)return t.formatDistance("xMinutes",s,a);if(s<90)return t.formatDistance("aboutXHours",1,a);if(s<b){const h=Math.round(s/60);return t.formatDistance("aboutXHours",h,a)}else{if(s<m)return t.formatDistance("xDays",1,a);if(s<M){const h=Math.round(s/b);return t.formatDistance("xDays",h,a)}else if(s<M*2)return c=Math.round(s/M),t.formatDistance("aboutXMonths",c,a)}if(c=R(u,d),c<12){const h=Math.round(s/M);return t.formatDistance("xMonths",h,a)}else{const h=c%12,D=Math.trunc(c/12);return h<3?t.formatDistance("aboutXYears",D,a):h<9?t.formatDistance("overXYears",D,a):t.formatDistance("almostXYears",D+1,a)}}function p(r,i){return P(r,H(r),i)}function K({open:r,onClose:i,favorites:e,title:l}){const t=A(),{recentlyVisited:m}=t,[o,a]=S.useState(-1),[d,u]=S.useState(0),f=Object.fromEntries(m.map(s=>[s.name,s])),w=e.map(s=>{var c;return{...s,dateAdded:new Date(((c=f[s.name])==null?void 0:c.dateAdded)??new Date)}}).sort((s,c)=>{var h,D;return((((h=f[s.name])==null?void 0:h.visitedCount)??0)-(((D=f[c.name])==null?void 0:D.visitedCount)??0))*o}).sort((s,c)=>(+s.dateAdded-+c.dateAdded)*d);return n.jsxs(_,{open:r,onClose:i,children:[n.jsx("h4",{className:"font-extrabold",children:l}),e.length===0?n.jsx("div",{children:"No favorites"}):n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{className:"whitespace-nowrap",children:n.jsxs(x,{onClick:()=>{u(0),a(o===0?-1:o===-1?1:0)},children:["# Visits"," ",o===1?n.jsx(v,{className:"inline"}):o===-1?n.jsx(y,{className:"inline"}):null]})}),n.jsx("th",{className:"whitespace-nowrap",children:n.jsxs(x,{onClick:()=>{a(0),u(d===0?-1:d===-1?1:0)},children:["Date added"," ",d===1?n.jsx(v,{className:"inline"}):d===-1?n.jsx(y,{className:"inline"}):null]})}),n.jsx("th",{className:"whitespace-nowrap",children:"Delete"}),n.jsx("th",{className:"whitespace-nowrap",children:"Home"})]})}),n.jsx("tbody",{children:w.map(s=>{var c;return n.jsxs("tr",{children:[n.jsx("td",{className:"whitespace-nowrap",children:n.jsx(F,{to:s.name,children:n.jsx(x,{children:X(s.name)})})}),n.jsx("td",{children:(c=f[s.name])==null?void 0:c.visitedCount}),n.jsx("td",{children:p(s.dateAdded,{addSuffix:!0})}),n.jsx("td",{children:n.jsx(x,{onClick:()=>{t.removeFavorite(s.name)},children:n.jsx(C,{className:"inline"})})}),n.jsx("td",{children:n.jsx(x,{onClick:()=>{t.setDefaultPage(s.name)},children:n.jsx(O,{className:"inline"})})})]},s.name)})})]})})]})}export{K as F};
//# sourceMappingURL=FavoritesDialog-FArwLXTG.js.map
