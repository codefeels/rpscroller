const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SavedPostFeed-B95nl92x.js","./index-MoLPG2Hx.js","./index-CeaiJ3Bn.css","./LoadingSpinner-CO34fQdq.js","./BaseDialog-BQZVCrI8.js","./Link-gStFHV2B.js","./formatDistanceToNowStrict-B7etE4jS.js","./en-US-DK8Z8mF7.js","./RedditPostFeed-BGSuNt9Q.js","./EditFeedDialog-Bit1zTA7.js"])))=>i.map(i=>d[i]);
import{u as B,j as n,r as j,_ as Fe,G as z,L as oe,B as F,a as P,m as st,i as rt,n as J,b as Rt,R as Ie,c as it,S as Et,M as yt,d as Ct}from"./index-MoLPG2Hx.js";import{B as ot,F as bt,a as Ot}from"./BaseDialog-BQZVCrI8.js";const Dt=j.lazy(()=>Fe(()=>import("./SavedPostFeed-B95nl92x.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),_t=j.lazy(()=>Fe(()=>import("./RedditPostFeed-BGSuNt9Q.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));function Vn(){const e=B(),{val:t}=e;return n.jsx(j.Suspense,{fallback:null,children:t==="savedposts"?n.jsx(Dt,{}):n.jsx(_t,{})})}function Vt(e){return z({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Le(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Ae(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Tt(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Mt(e){return z({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Ft(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function K({children:e,onClick:t}){return n.jsx("div",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer whitespace-nowrap",onClick:t,children:e})}function It({children:e,onClick:t}){return n.jsx("span",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer m-1 whitespace-nowrap",onClick:t,children:e})}const Lt=j.lazy(()=>Fe(()=>import("./EditFeedDialog-Bit1zTA7.js"),__vite__mapDeps([9,1,2,4]),import.meta.url));function At({feed:e}){const t=B(),[s,i]=j.useState(!1);return n.jsxs("div",{children:[n.jsx(oe,{to:`/r/${e.subreddits.join("+")}`,children:n.jsxs(It,{children:["- ",e.name]})}),n.jsx(F,{onClick:()=>{i(!0)},children:n.jsx(Vt,{})}),n.jsx(F,{onClick:()=>{t.removeFeed(e.name)},children:n.jsx(Ft,{})}),s?n.jsx(j.Suspense,{fallback:null,children:n.jsx(Lt,{onClose:()=>{i(!1)},feed:e})}):null]})}function Nt(){const e=B(),{feeds:t}=e,[s,i]=P("showFeeds",!0);return n.jsx(n.Fragment,{children:t.length>0?n.jsxs("div",{children:[n.jsxs("div",{children:["Feeds:"," ",n.jsx(F,{onClick:()=>{i(!s)},children:s?n.jsx(Le,{className:"inline"}):n.jsx(Ae,{className:"inline"})})]}),s?t.map(c=>n.jsx(At,{feed:c},c.name)):null]}):null})}function at(e){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 20h2V8h3L8 4 4 8h3zm13-4h-3V4h-2v12h-3l4 4z"},child:[]}]})(e)}function Tn(e){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 14h4v7a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-7h4a1.001 1.001 0 0 0 .781-1.625l-8-10c-.381-.475-1.181-.475-1.562 0l-8 10A1.001 1.001 0 0 0 4 14z"},child:[]}]})(e)}function Ne({children:e}){return n.jsx("div",{children:e})}function kt({id:e,checked:t,onChange:s,label:i}){return n.jsxs("div",{children:[n.jsx("input",{id:e,type:"radio",checked:t,onChange:s,className:"radio radio-sm mr-2"}),n.jsx("label",{htmlFor:e,children:i})]})}const Pt={recentlyVisited:"Sort by recently visited",visitedCount:"Sort by most visited"};function ct({sortMode:e,setSortMode:t,onClose:s}){return n.jsx(ot,{open:!0,onClose:()=>{s()},children:n.jsx("ul",{children:Object.entries(Pt).map(([i,c])=>n.jsx("li",{children:n.jsx(kt,{id:i,checked:i===e,label:c,onChange:o=>{o.target.checked&&t(i)}})},i))})})}function Ut(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(r=>`r/${r.subreddits.join("+")}`)),[i,c]=P("showRecentlyVisitedSubreddits",!0),[o,a]=P("showMoreRecentlyVisitedSubreddits",!0),[l,f]=P("sortMode","recentlyVisited"),[S,m]=j.useState(!1);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-1",children:[l==="recentlyVisited"?"Recently visited":"Most visited"," ","subs:",n.jsx(F,{onClick:()=>{c(!i)},children:i?n.jsx(bt,{className:"inline"}):n.jsx(Ot,{className:"inline"})}),n.jsx(F,{onClick:()=>{m(!0)},children:n.jsx(at,{})}),n.jsx(F,{onClick:()=>{a(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx(Ne,{children:n.jsx("div",{children:st(t.filter(r=>!rt(r.name)),l==="visitedCount",(r,d)=>d.visitedCount-r.visitedCount).slice(0,o?1e3:10).filter(r=>!s.has(r.name)).map(r=>n.jsx(oe,{to:r.name,children:n.jsxs(K,{children:["- ",J(r.name)," (",r.visitedCount,")"]})},r.name))})}):null,S?n.jsx(ct,{sortMode:l,setSortMode:f,onClose:()=>{m(!1)}}):null]})}function Ht(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(r=>`r/${r.subreddits.join("+")}`)),[i,c]=P("showRecentlyVisitedUsers",!0),[o,a]=P("showMoreRecentlyVisitedUsers",!0),[l,f]=P("sortMode","recentlyVisited"),[S,m]=j.useState(!1);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-1",children:[l==="recentlyVisited"?"Recently visited":"Most visited"," ","users:",n.jsx(F,{onClick:()=>{c(!i)},children:i?n.jsx(Le,{className:"inline"}):n.jsx(Ae,{className:"inline"})}),n.jsx(F,{onClick:()=>{m(!0)},children:n.jsx(at,{})}),n.jsx(F,{onClick:()=>{a(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx(Ne,{children:n.jsx("div",{children:st(t.filter(r=>rt(r.name)),l==="visitedCount",(r,d)=>d.visitedCount-r.visitedCount).slice(0,o?1e3:10).filter(r=>!s.has(r.name)).map(r=>n.jsx(oe,{to:r.name,children:n.jsxs(K,{children:["- ",J(r.name)," (",r.visitedCount,")"]})},r.name))})}):null,S?n.jsx(ct,{sortMode:l,setSortMode:f,onClose:()=>{m(!1)}}):null]})}var ve={exports:{}},xe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function Wt(){if(Ye)return xe;Ye=1;var e=Rt();function t(r,d){return r===d&&(r!==0||1/r===1/d)||r!==r&&d!==d}var s=typeof Object.is=="function"?Object.is:t,i=e.useState,c=e.useEffect,o=e.useLayoutEffect,a=e.useDebugValue;function l(r,d){var p=d(),E=i({inst:{value:p,getSnapshot:d}}),v=E[0].inst,$=E[1];return o(function(){v.value=p,v.getSnapshot=d,f(v)&&$({inst:v})},[r,p,d]),c(function(){return f(v)&&$({inst:v}),r(function(){f(v)&&$({inst:v})})},[r]),a(p),p}function f(r){var d=r.getSnapshot;r=r.value;try{var p=d();return!s(r,p)}catch{return!0}}function S(r,d){return d()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:l;return xe.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,xe}var Xe;function Bt(){return Xe||(Xe=1,ve.exports=Wt()),ve.exports}var zt=Bt();const lt=0,ut=1,dt=2,Qe=3;var Ze=Object.prototype.hasOwnProperty;function Ce(e,t){var s,i;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((i=e.length)===t.length)for(;i--&&Ce(e[i],t[i]););return i===-1}if(!s||typeof e=="object"){i=0;for(s in e)if(Ze.call(e,s)&&++i&&!Ze.call(t,s)||!(s in t)||!Ce(e[s],t[s]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}const k=new WeakMap,H=()=>{},D=H(),be=Object,h=e=>e===D,L=e=>typeof e=="function",W=(e,t)=>({...e,...t}),ft=e=>L(e.then),we={},fe={},ke="undefined",ae=typeof window!=ke,Oe=typeof document!=ke,$t=ae&&"Deno"in window,qt=()=>ae&&typeof window.requestAnimationFrame!=ke,ht=(e,t)=>{const s=k.get(e);return[()=>!h(t)&&e.get(t)||we,i=>{if(!h(t)){const c=e.get(t);t in fe||(fe[t]=c),s[5](t,W(c,i),c||we)}},s[6],()=>!h(t)&&t in fe?fe[t]:!h(t)&&e.get(t)||we]};let De=!0;const Gt=()=>De,[_e,Ve]=ae&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],Jt=()=>{const e=Oe&&document.visibilityState;return h(e)||e!=="hidden"},Kt=e=>(Oe&&document.addEventListener("visibilitychange",e),_e("focus",e),()=>{Oe&&document.removeEventListener("visibilitychange",e),Ve("focus",e)}),Yt=e=>{const t=()=>{De=!0,e()},s=()=>{De=!1};return _e("online",t),_e("offline",s),()=>{Ve("online",t),Ve("offline",s)}},Xt={isOnline:Gt,isVisible:Jt},Qt={initFocus:Kt,initReconnect:Yt},et=!Ie.useId,ie=!ae||$t,Zt=e=>qt()?window.requestAnimationFrame(e):setTimeout(e,1),je=ie?j.useEffect:j.useLayoutEffect,ge=typeof navigator<"u"&&navigator.connection,tt=!ie&&ge&&(["slow-2g","2g"].includes(ge.effectiveType)||ge.saveData),he=new WeakMap,Re=(e,t)=>be.prototype.toString.call(e)===`[object ${t}]`;let en=0;const Te=e=>{const t=typeof e,s=Re(e,"Date"),i=Re(e,"RegExp"),c=Re(e,"Object");let o,a;if(be(e)===e&&!s&&!i){if(o=he.get(e),o)return o;if(o=++en+"~",he.set(e,o),Array.isArray(e)){for(o="@",a=0;a<e.length;a++)o+=Te(e[a])+",";he.set(e,o)}if(c){o="#";const l=be.keys(e).sort();for(;!h(a=l.pop());)h(e[a])||(o+=a+":"+Te(e[a])+",");he.set(e,o)}}else o=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},Pe=e=>{if(L(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Te(e):"",[e,t]};let tn=0;const Me=()=>++tn;async function mt(...e){const[t,s,i,c]=e,o=W({populateCache:!0,throwOnError:!0},typeof c=="boolean"?{revalidate:c}:c||{});let a=o.populateCache;const l=o.rollbackOnError;let f=o.optimisticData;const S=d=>typeof l=="function"?l(d):l!==!1,m=o.throwOnError;if(L(s)){const d=s,p=[],E=t.keys();for(const v of E)!/^\$(inf|sub)\$/.test(v)&&d(t.get(v)._k)&&p.push(v);return Promise.all(p.map(r))}return r(s);async function r(d){const[p]=Pe(d);if(!p)return;const[E,v]=ht(t,p),[$,u,ce,se]=k.get(t),U=()=>{const T=$[p];return(L(o.revalidate)?o.revalidate(E().data,d):o.revalidate!==!1)&&(delete ce[p],delete se[p],T&&T[0])?T[0](dt).then(()=>E().data):E().data};if(e.length<3)return U();let C=i,_;const Y=Me();u[p]=[Y,0];const g=!h(f),X=E(),I=X.data,Q=X._c,q=h(Q)?I:Q;if(g&&(f=L(f)?f(q,I):f,v({data:f,_c:q})),L(C))try{C=C(q)}catch(T){_=T}if(C&&ft(C))if(C=await C.catch(T=>{_=T}),Y!==u[p][0]){if(_)throw _;return C}else _&&g&&S(_)&&(a=!0,v({data:q,_c:D}));if(a&&!_)if(L(a)){const T=a(C,q);v({data:T,error:D,_c:D})}else v({data:C,error:D,_c:D});if(u[p][1]=Me(),Promise.resolve(U()).then(()=>{v({_c:D})}),_){if(m)throw _;return}return C}}const nt=(e,t)=>{for(const s in e)e[s][0]&&e[s][0](t)},nn=(e,t)=>{if(!k.has(e)){const s=W(Qt,t),i=Object.create(null),c=mt.bind(D,e);let o=H;const a=Object.create(null),l=(m,r)=>{const d=a[m]||[];return a[m]=d,d.push(r),()=>d.splice(d.indexOf(r),1)},f=(m,r,d)=>{e.set(m,r);const p=a[m];if(p)for(const E of p)E(r,d)},S=()=>{if(!k.has(e)&&(k.set(e,[i,Object.create(null),Object.create(null),Object.create(null),c,f,l]),!ie)){const m=s.initFocus(setTimeout.bind(D,nt.bind(D,i,lt))),r=s.initReconnect(setTimeout.bind(D,nt.bind(D,i,ut)));o=()=>{m&&m(),r&&r(),k.delete(e)}}};return S(),[e,c,S,o]}return[e,k.get(e)[4]]},sn=(e,t,s,i,c)=>{const o=s.errorRetryCount,a=c.retryCount,l=~~((Math.random()+.5)*(1<<(a<8?a:8)))*s.errorRetryInterval;!h(o)&&a>o||setTimeout(i,l,c)},rn=Ce,[pt,on]=nn(new Map),an=W({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:sn,onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:tt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:tt?5e3:3e3,compare:rn,isPaused:()=>!1,cache:pt,mutate:on,fallback:{}},Xt),cn=(e,t)=>{const s=W(e,t);if(t){const{use:i,fallback:c}=e,{use:o,fallback:a}=t;i&&o&&(s.use=i.concat(o)),c&&a&&(s.fallback=W(c,a))}return s},ln=j.createContext({}),un="$inf$",St=ae&&window.__SWR_DEVTOOLS_USE__,dn=St?window.__SWR_DEVTOOLS_USE__:[],fn=()=>{St&&(window.__SWR_DEVTOOLS_REACT__=Ie)},vt=e=>L(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],hn=()=>W(an,j.useContext(ln)),mn=e=>(t,s,i)=>e(t,s&&((...o)=>{const[a]=Pe(t),[,,,l]=k.get(pt);if(a.startsWith(un))return s(...o);const f=l[a];return h(f)?s(...o):(delete l[a],f)}),i),pn=dn.concat(mn),Sn=e=>function(...s){const i=hn(),[c,o,a]=vt(s),l=cn(i,a);let f=e;const{use:S}=l,m=(S||[]).concat(pn);for(let r=m.length;r--;)f=m[r](f);return f(c,o||l.fetcher||null,l)},vn=(e,t,s)=>{const i=t[e]||(t[e]=[]);return i.push(s),()=>{const c=i.indexOf(s);c>=0&&(i[c]=i[i.length-1],i.pop())}},Mn=(e,t)=>(...s)=>{const[i,c,o]=vt(s),a=(o.use||[]).concat(t);return e(i,c,{...o,use:a})};fn();const Ee=Ie.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),ye={dedupe:!0},xn=(e,t,s)=>{const{cache:i,compare:c,suspense:o,fallbackData:a,revalidateOnMount:l,revalidateIfStale:f,refreshInterval:S,refreshWhenHidden:m,refreshWhenOffline:r,keepPreviousData:d}=s,[p,E,v,$]=k.get(i),[u,ce]=Pe(e),se=j.useRef(!1),U=j.useRef(!1),C=j.useRef(u),_=j.useRef(t),Y=j.useRef(s),g=()=>Y.current,X=()=>g().isVisible()&&g().isOnline(),[I,Q,q,T]=ht(i,u),Z=j.useRef({}).current,le=h(a)?h(s.fallback)?D:s.fallback[u]:a,He=(w,x)=>{for(const b in Z){const R=b;if(R==="data"){if(!c(w[R],x[R])&&(!h(w[R])||!c(de,x[R])))return!1}else if(x[R]!==w[R])return!1}return!0},We=j.useMemo(()=>{const w=!u||!t?!1:h(l)?g().isPaused()||o?!1:f!==!1:l,x=O=>{const A=W(O);return delete A._k,w?{isValidating:!0,isLoading:!0,...A}:A},b=I(),R=T(),M=x(b),ne=b===R?M:x(R);let y=M;return[()=>{const O=x(I());return He(O,y)?(y.data=O.data,y.isLoading=O.isLoading,y.isValidating=O.isValidating,y.error=O.error,y):(y=O,O)},()=>ne]},[i,u]),ee=zt.useSyncExternalStore(j.useCallback(w=>q(u,(x,b)=>{He(b,x)||w()}),[i,u]),We[0],We[1]),Be=!se.current,xt=p[u]&&p[u].length>0,te=ee.data,G=h(te)?le&&ft(le)?Ee(le):le:te,ue=ee.error,me=j.useRef(G),de=d?h(te)?h(me.current)?G:me.current:te:G,ze=xt&&!h(ue)?!1:Be&&!h(l)?l:g().isPaused()?!1:o?h(G)?!1:f:h(G)||f,$e=!!(u&&t&&Be&&ze),wt=h(ee.isValidating)?$e:ee.isValidating,jt=h(ee.isLoading)?$e:ee.isLoading,re=j.useCallback(async w=>{const x=_.current;if(!u||!x||U.current||g().isPaused())return!1;let b,R,M=!0;const ne=w||{},y=!v[u]||!ne.dedupe,O=()=>et?!U.current&&u===C.current&&se.current:u===C.current,A={isValidating:!1,isLoading:!1},Ge=()=>{Q(A)},Je=()=>{const V=v[u];V&&V[1]===R&&delete v[u]},Ke={isValidating:!0};h(I().data)&&(Ke.isLoading=!0);try{if(y&&(Q(Ke),s.loadingTimeout&&h(I().data)&&setTimeout(()=>{M&&O()&&g().onLoadingSlow(u,s)},s.loadingTimeout),v[u]=[x(ce),Me()]),[b,R]=v[u],b=await b,y&&setTimeout(Je,s.dedupingInterval),!v[u]||v[u][1]!==R)return y&&O()&&g().onDiscarded(u),!1;A.error=D;const V=E[u];if(!h(V)&&(R<=V[0]||R<=V[1]||V[1]===0))return Ge(),y&&O()&&g().onDiscarded(u),!1;const N=I().data;A.data=c(N,b)?N:b,y&&O()&&g().onSuccess(b,u,s)}catch(V){Je();const N=g(),{shouldRetryOnError:pe}=N;N.isPaused()||(A.error=V,y&&O()&&(N.onError(V,u,N),(pe===!0||L(pe)&&pe(V))&&(!g().revalidateOnFocus||!g().revalidateOnReconnect||X())&&N.onErrorRetry(V,u,N,gt=>{const Se=p[u];Se&&Se[0]&&Se[0](Qe,gt)},{retryCount:(ne.retryCount||0)+1,dedupe:!0})))}return M=!1,Ge(),!0},[u,i]),qe=j.useCallback((...w)=>mt(i,C.current,...w),[]);if(je(()=>{_.current=t,Y.current=s,h(te)||(me.current=te)}),je(()=>{if(!u)return;const w=re.bind(D,ye);let x=0;g().revalidateOnFocus&&(x=Date.now()+g().focusThrottleInterval);const R=vn(u,p,(M,ne={})=>{if(M==lt){const y=Date.now();g().revalidateOnFocus&&y>x&&X()&&(x=y+g().focusThrottleInterval,w())}else if(M==ut)g().revalidateOnReconnect&&X()&&w();else{if(M==dt)return re();if(M==Qe)return re(ne)}});return U.current=!1,C.current=u,se.current=!0,Q({_k:ce}),ze&&(h(G)||ie?w():Zt(w)),()=>{U.current=!0,R()}},[u]),je(()=>{let w;function x(){const R=L(S)?S(I().data):S;R&&w!==-1&&(w=setTimeout(b,R))}function b(){!I().error&&(m||g().isVisible())&&(r||g().isOnline())?re(ye).then(x):x()}return x(),()=>{w&&(clearTimeout(w),w=-1)}},[S,m,r,u]),j.useDebugValue(de),o&&h(G)&&u){if(!et&&ie)throw new Error("Fallback data is required when using Suspense in SSR.");_.current=t,Y.current=s,U.current=!1;const w=$[u];if(!h(w)){const x=qe(w);Ee(x)}if(h(ue)){const x=re(ye);h(de)||(x.status="fulfilled",x.value=!0),Ee(x)}else throw ue}return{mutate:qe,get data(){return Z.data=!0,de},get error(){return Z.error=!0,ue},get isValidating(){return Z.isValidating=!0,wt},get isLoading(){return Z.isLoading=!0,jt}}},wn=Sn(xn);async function Ue(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}async function jn(e){return(await Ue(e)).text()}async function gn(e){return(await Ue(e)).arrayBuffer()}async function Fn(e){return(await Ue(e)).json()}async function Rn(){const t=(await jn("node-ids.txt")).split(`
`);let s;const i=await gn("links.bin"),c=new DataView(i),o=[];for(let l=0;l<c.byteLength;l+=4){const f=c.getInt32(l,!0);if(f<0)s=-f-1;else{const S=f-1;o.push([t[s],t[S]])}}const a={};for(let l=0,f=o.length;l<f;l++){const[S,m]=o[l];a[S]??(a[S]=[]),a[S].push(m)}return a}function En(){const e=B(),{val:t,recentlyVisited:s}=e,{data:i,isLoading:c,error:o}=wn("graph",()=>Rn(),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),[a,l]=P("showSimilar",!0),[f,S]=P("showMoreSimilar",!0),m=Object.fromEntries(s.map(r=>[r.name,r]));return n.jsxs("div",{children:["Similar subreddits:",n.jsx(F,{onClick:()=>{l(!a)},children:a?n.jsx(Le,{className:"inline"}):n.jsx(Ae,{className:"inline"})}),n.jsx(F,{className:"ml-1",onClick:()=>{S(!f)},children:f?"Show less":"Show more"}),a?n.jsxs(Ne,{children:[c?n.jsx("div",{children:"Loading"}):null,o?n.jsx("div",{className:"text-error",children:`${o}`}):null,i?n.jsx("div",{children:[...new Set(i[J(t).replace("r/","")]??[])].map(r=>`/r/${r}`).sort((r,d)=>{var p,E;return((((p=m[J(r)])==null?void 0:p.visitedCount)??0)-(((E=m[J(d)])==null?void 0:E.visitedCount)??0))*-1}).slice(0,f?1e3:10).map(r=>{var d;return n.jsx(oe,{to:r,children:n.jsxs(K,{children:["- ",J(r)," (",((d=m[J(r)])==null?void 0:d.visitedCount)??0,")"]})},r)})}):null]}):null]})}function yn({children:e}){return n.jsx("div",{className:"mt-5 mb-20",children:e})}function Cn({children:e}){const t=B();return n.jsx(ot,{open:!0,onClose:()=>{t.setSidebarOpen(!1)},children:n.jsx("div",{className:"w-screen h-screen",children:e})})}function bn({children:e}){return it()?n.jsx(Cn,{children:e}):n.jsx(yn,{children:e})}function In(){const e=B(),t=it();return n.jsxs(bn,{children:[t?n.jsxs(n.Fragment,{children:[n.jsx(Et,{}),n.jsx("hr",{})]}):null,n.jsx(En,{}),n.jsx("hr",{}),n.jsx(Ut,{}),n.jsx("hr",{}),n.jsx(Ht,{}),n.jsx("hr",{}),n.jsx(Nt,{}),n.jsx("hr",{}),n.jsx(oe,{to:"/savedposts",children:n.jsxs(K,{children:[n.jsx(Tt,{className:"inline"})," Saved posts"]})}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("multi")},children:[n.jsx(Mt,{className:"inline"})," Make list"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("blocked")},children:[n.jsx(yt,{className:"inline"})," Blocked users"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("about")},children:[n.jsx(Ct,{className:"inline"})," About"]})]})}export{Tn as B,Vn as F,un as I,In as S,D as U,k as a,ht as b,pt as c,je as d,Pe as e,L as f,Tt as g,h as i,Fn as m,zt as s,wn as u,Mn as w};
//# sourceMappingURL=Sidebar-DchzlSnP.js.map
