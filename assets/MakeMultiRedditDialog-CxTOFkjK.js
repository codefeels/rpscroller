import{u as k,r as d,i as C,j as e,B as a,n as y,g as v}from"./index-Bz7-O_C8.js";import{B,c as w,d as S}from"./BaseDialog-Bnk5YqMW.js";import{f as L}from"./formatDistanceToNowStrict-B7etE4jS.js";import"./en-US-DK8Z8mF7.js";function R({open:N,onClose:h}){const x=k(),{recentlyVisited:D,favorites:u}=x,[c,j]=d.useState([]),[i,r]=d.useState(-1),[n,l]=d.useState(0),[m,b]=d.useState(""),[F,A]=d.useState(!0),o=Object.fromEntries(D.map(s=>[s.name,s])),g=[...u.filter(s=>!C(s.name)).sort((s,t)=>s.name.toLowerCase().localeCompare(t.name.toLowerCase())),...u.filter(s=>C(s.name)).sort((s,t)=>s.name.toLowerCase().localeCompare(t.name.toLowerCase()))].map(s=>{var t;return{...s,dateAdded:new Date(((t=o[s.name])==null?void 0:t.dateAdded)??new Date)}}).sort((s,t)=>{var p,f;return((((p=o[s.name])==null?void 0:p.visitedCount)??0)-(((f=o[t.name])==null?void 0:f.visitedCount)??0))*i}).sort((s,t)=>(+s.dateAdded-+t.dateAdded)*n);return e.jsx(B,{open:N,onClose:h,children:F?e.jsxs("div",{children:[e.jsxs("h4",{children:["Make multi-reddit",e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(a,{onClick:()=>{A(!1)},children:"Create feed"}),e.jsx(a,{onClick:()=>{j([])},children:"Clear"})]})})]}),e.jsx("div",{className:"max-h-[80vh] overflow-auto",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{className:"whitespace-nowrap",children:e.jsxs(a,{onClick:()=>{l(0),r(i===0?-1:i===-1?1:0)},children:["# Visits"," ",i===1?e.jsx(w,{className:"inline"}):i===-1?e.jsx(S,{className:"inline"}):null]})}),e.jsx("th",{className:"whitespace-nowrap",children:e.jsxs(a,{onClick:()=>{r(0),l(n===0?-1:n===-1?1:0)},children:["Date added"," ",n===1?e.jsx(w,{className:"inline"}):n===-1?e.jsx(S,{className:"inline"}):null]})})]})}),e.jsx("tbody",{children:g.map(s=>{var t;return e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx(a,{onClick:()=>{c.includes(v(s.name))||j([...c,v(s.name)])},children:y(s.name)})}),e.jsx("td",{children:(t=o[s.name])==null?void 0:t.visitedCount}),e.jsx("td",{children:L(s.dateAdded,{addSuffix:!0})})]},s.name)})})]})})]}):e.jsx("div",{className:"m-8",children:e.jsx("form",{onSubmit:s=>{s.preventDefault(),m&&(x.createFeed({subreddits:c,feedName:m}),h())},children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedname",children:"Feed name:"}),e.jsx("input",{id:"feedname",type:"text",value:m,onChange:s=>{b(s.target.value)}}),e.jsx(a,{type:"submit",children:"Submit"})]})})})})}export{R as default};
//# sourceMappingURL=MakeMultiRedditDialog-CxTOFkjK.js.map
