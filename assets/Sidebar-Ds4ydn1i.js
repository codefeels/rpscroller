const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SavedPostFeed-DuFhDRzj.js","./index-CuTVbqaZ.js","./index-CRM_LRyJ.css","./LoadingSpinner-1GQTKJMm.js","./BaseDialog-DQlc5Ewm.js","./Link-B2qykyNn.js","./formatDistanceToNowStrict-B7etE4jS.js","./en-US-DK8Z8mF7.js","./RedditPostFeed-Wojrep4t.js","./EditFeedDialog-CFHMpEth.js"])))=>i.map(i=>d[i]);
import{u as B,j as n,r as g,_ as Ie,G as W,a as P,B as F,m as tt,i as nt,n as J,b as st,c as gt,R as Fe,S as Rt,M as Et,d as bt}from"./index-CuTVbqaZ.js";import{F as yt,a as Ct,b as Ot,B as _t}from"./BaseDialog-DQlc5Ewm.js";const Vt=g.lazy(()=>Ie(()=>import("./SavedPostFeed-DuFhDRzj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),Dt=g.lazy(()=>Ie(()=>import("./RedditPostFeed-Wojrep4t.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));function Vn(){const e=B(),{val:t}=e;return n.jsx(g.Suspense,{fallback:null,children:t==="savedposts"?n.jsx(Vt,{}):n.jsx(Dt,{})})}function Tt(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Me(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Le(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function It(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Ft(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Mt(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function K({children:e,onClick:t}){return n.jsx("div",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer whitespace-nowrap",onClick:t,children:e})}function Lt({children:e,onClick:t}){return n.jsx("span",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer m-1 whitespace-nowrap",onClick:t,children:e})}const At=g.lazy(()=>Ie(()=>import("./EditFeedDialog-CFHMpEth.js"),__vite__mapDeps([9,1,2,4]),import.meta.url));function Nt({feed:e}){const t=B(),[s,r]=g.useState(!1);return n.jsxs("div",{children:[n.jsxs(Lt,{onClick:()=>{t.setVal(`/r/${e.subreddits.join("+")}`)},children:["- ",e.name]}),n.jsx(F,{onClick:()=>{r(!0)},children:n.jsx(Tt,{})}),n.jsx(F,{onClick:()=>{t.removeFeed(e.name)},children:n.jsx(Mt,{})}),s?n.jsx(g.Suspense,{fallback:null,children:n.jsx(At,{onClose:()=>{r(!1)},feed:e})}):null]})}function kt(){const e=B(),{feeds:t}=e,[s,r]=P("showFeeds",!0);return n.jsx(n.Fragment,{children:t.length>0?n.jsxs("div",{children:[n.jsxs("div",{children:["Feeds ",n.jsx(yt,{className:"inline"}),":"," ",n.jsx(F,{onClick:()=>{r(!s)},children:s?n.jsx(Me,{className:"inline"}):n.jsx(Le,{className:"inline"})})]}),s?t.map(l=>n.jsx(Nt,{feed:l},l.name)):null]}):null})}function Ae({children:e}){return n.jsx("div",{children:e})}function rt({id:e,checked:t,onChange:s,label:r}){return n.jsxs("div",{children:[n.jsx("input",{id:e,type:"radio",checked:t,onChange:s,className:"radio radio-sm mr-2"}),n.jsx("label",{htmlFor:e,children:r})]})}function it(e){return W({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 20h2V8h3L8 4 4 8h3zm13-4h-3V4h-2v12h-3l4 4z"},child:[]}]})(e)}function Dn(e){return W({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 14h4v7a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-7h4a1.001 1.001 0 0 0 .781-1.625l-8-10c-.381-.475-1.181-.475-1.562 0l-8 10A1.001 1.001 0 0 0 4 14z"},child:[]}]})(e)}const ot={recentlyVisited:"Sort by recently visited",visitedCount:"Sort by most visited"};function Pt(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(o=>`r/${o.subreddits.join("+")}`)),[r,l]=P("showRecentlyVisitedSubreddits",!0),[i,a]=P("showMoreRecentlyVisitedSubreddits",!0),[u,f]=P("sortMode","recentlyVisited");return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-1",children:[u==="recentlyVisited"?"Recently visited":"Most visited"," ","subs:",n.jsx(F,{onClick:()=>{l(!r)},children:r?n.jsx(Ct,{className:"inline"}):n.jsx(Ot,{className:"inline"})}),n.jsxs("div",{className:"dropdown dropdown-bottom",children:[n.jsx(F,{children:n.jsx(it,{})}),n.jsx("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm",children:Object.entries(ot).map(([o,p])=>n.jsx("li",{children:n.jsx(rt,{id:o,checked:o===u,label:p,onChange:c=>{c.target.checked&&f(o)}})},o))})]}),n.jsx(F,{onClick:()=>{a(!i)},children:i?"Show less":"Show more"})]}),r?n.jsx(Ae,{children:n.jsx("div",{children:tt(t.filter(o=>!nt(o.name)),u==="visitedCount",(o,p)=>p.visitedCount-o.visitedCount).slice(0,i?1e3:10).filter(o=>!s.has(o.name)).map(o=>n.jsxs(K,{onClick:()=>{e.setVal(o.name)},children:["- ",J(o.name)," (",o.visitedCount,")"]},o.name))})}):null]})}function Ut(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(o=>`r/${o.subreddits.join("+")}`)),[r,l]=P("showRecentlyVisitedUsers",!0),[i,a]=P("showMoreRecentlyVisitedUsers",!0),[u,f]=P("sortMode","recentlyVisited");return n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-1",children:[u==="recentlyVisited"?"Recently visited":"Most visited"," ","users:",n.jsx(F,{onClick:()=>{l(!r)},children:r?n.jsx(Me,{className:"inline"}):n.jsx(Le,{className:"inline"})}),n.jsxs("div",{className:"dropdown dropdown-bottom",children:[n.jsx(F,{children:n.jsx(it,{})}),n.jsx("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm",children:Object.entries(ot).map(([o,p])=>n.jsx("li",{children:n.jsx(rt,{id:o,checked:o===u,label:p,onChange:c=>{c.target.checked&&f(o)}})},o))})]}),n.jsx(F,{onClick:()=>{a(!i)},children:i?"Show less":"Show more"})]}),r?n.jsx(Ae,{children:n.jsx("div",{children:tt(t.filter(o=>nt(o.name)),u==="visitedCount",(o,p)=>p.visitedCount-o.visitedCount).slice(0,i?1e3:10).filter(o=>!s.has(o.name)).map(o=>n.jsxs(K,{onClick:()=>{e.setVal(o.name)},children:["- ",J(o.name)," (",o.visitedCount,")"]}))})}):null]})}function Ht({children:e}){return n.jsx("div",{children:e})}function zt({children:e}){const t=B();return n.jsx(_t,{open:!0,onClose:()=>{t.setSidebarOpen(!1)},children:n.jsx("div",{className:"w-screen h-screen",children:e})})}function Bt({children:e}){return st()?n.jsx(zt,{children:e}):n.jsx(Ht,{children:e})}var ve={exports:{}},Se={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je;function Wt(){if(Je)return Se;Je=1;var e=gt();function t(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var s=typeof Object.is=="function"?Object.is:t,r=e.useState,l=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function u(c,h){var v=h(),E=r({inst:{value:v,getSnapshot:h}}),S=E[0].inst,$=E[1];return i(function(){S.value=v,S.getSnapshot=h,f(S)&&$({inst:S})},[c,v,h]),l(function(){return f(S)&&$({inst:S}),c(function(){f(S)&&$({inst:S})})},[c]),a(v),v}function f(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!s(c,v)}catch{return!0}}function o(c,h){return h()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?o:u;return Se.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Se}var Ke;function $t(){return Ke||(Ke=1,ve.exports=Wt()),ve.exports}var qt=$t();const at=0,ct=1,lt=2,Ye=3;var Xe=Object.prototype.hasOwnProperty;function be(e,t){var s,r;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((r=e.length)===t.length)for(;r--&&be(e[r],t[r]););return r===-1}if(!s||typeof e=="object"){r=0;for(s in e)if(Xe.call(e,s)&&++r&&!Xe.call(t,s)||!(s in t)||!be(e[s],t[s]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const k=new WeakMap,H=()=>{},_=H(),ye=Object,m=e=>e===_,L=e=>typeof e=="function",z=(e,t)=>({...e,...t}),ut=e=>L(e.then),xe={},de={},Ne="undefined",oe=typeof window!=Ne,Ce=typeof document!=Ne,Gt=oe&&"Deno"in window,Jt=()=>oe&&typeof window.requestAnimationFrame!=Ne,dt=(e,t)=>{const s=k.get(e);return[()=>!m(t)&&e.get(t)||xe,r=>{if(!m(t)){const l=e.get(t);t in de||(de[t]=l),s[5](t,z(l,r),l||xe)}},s[6],()=>!m(t)&&t in de?de[t]:!m(t)&&e.get(t)||xe]};let Oe=!0;const Kt=()=>Oe,[_e,Ve]=oe&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],Yt=()=>{const e=Ce&&document.visibilityState;return m(e)||e!=="hidden"},Xt=e=>(Ce&&document.addEventListener("visibilitychange",e),_e("focus",e),()=>{Ce&&document.removeEventListener("visibilitychange",e),Ve("focus",e)}),Qt=e=>{const t=()=>{Oe=!0,e()},s=()=>{Oe=!1};return _e("online",t),_e("offline",s),()=>{Ve("online",t),Ve("offline",s)}},Zt={isOnline:Kt,isVisible:Yt},en={initFocus:Xt,initReconnect:Qt},Qe=!Fe.useId,ie=!oe||Gt,tn=e=>Jt()?window.requestAnimationFrame(e):setTimeout(e,1),we=ie?g.useEffect:g.useLayoutEffect,je=typeof navigator<"u"&&navigator.connection,Ze=!ie&&je&&(["slow-2g","2g"].includes(je.effectiveType)||je.saveData),fe=new WeakMap,ge=(e,t)=>ye.prototype.toString.call(e)===`[object ${t}]`;let nn=0;const De=e=>{const t=typeof e,s=ge(e,"Date"),r=ge(e,"RegExp"),l=ge(e,"Object");let i,a;if(ye(e)===e&&!s&&!r){if(i=fe.get(e),i)return i;if(i=++nn+"~",fe.set(e,i),Array.isArray(e)){for(i="@",a=0;a<e.length;a++)i+=De(e[a])+",";fe.set(e,i)}if(l){i="#";const u=ye.keys(e).sort();for(;!m(a=u.pop());)m(e[a])||(i+=a+":"+De(e[a])+",");fe.set(e,i)}}else i=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},ke=e=>{if(L(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?De(e):"",[e,t]};let sn=0;const Te=()=>++sn;async function ft(...e){const[t,s,r,l]=e,i=z({populateCache:!0,throwOnError:!0},typeof l=="boolean"?{revalidate:l}:l||{});let a=i.populateCache;const u=i.rollbackOnError;let f=i.optimisticData;const o=h=>typeof u=="function"?u(h):u!==!1,p=i.throwOnError;if(L(s)){const h=s,v=[],E=t.keys();for(const S of E)!/^\$(inf|sub)\$/.test(S)&&h(t.get(S)._k)&&v.push(S);return Promise.all(v.map(c))}return c(s);async function c(h){const[v]=ke(h);if(!v)return;const[E,S]=dt(t,v),[$,d,ae,se]=k.get(t),U=()=>{const T=$[v];return(L(i.revalidate)?i.revalidate(E().data,h):i.revalidate!==!1)&&(delete ae[v],delete se[v],T&&T[0])?T[0](lt).then(()=>E().data):E().data};if(e.length<3)return U();let y=r,V;const Y=Te();d[v]=[Y,0];const j=!m(f),X=E(),M=X.data,Q=X._c,q=m(Q)?M:Q;if(j&&(f=L(f)?f(q,M):f,S({data:f,_c:q})),L(y))try{y=y(q)}catch(T){V=T}if(y&&ut(y))if(y=await y.catch(T=>{V=T}),Y!==d[v][0]){if(V)throw V;return y}else V&&j&&o(V)&&(a=!0,S({data:q,_c:_}));if(a&&!V)if(L(a)){const T=a(y,q);S({data:T,error:_,_c:_})}else S({data:y,error:_,_c:_});if(d[v][1]=Te(),Promise.resolve(U()).then(()=>{S({_c:_})}),V){if(p)throw V;return}return y}}const et=(e,t)=>{for(const s in e)e[s][0]&&e[s][0](t)},rn=(e,t)=>{if(!k.has(e)){const s=z(en,t),r=Object.create(null),l=ft.bind(_,e);let i=H;const a=Object.create(null),u=(p,c)=>{const h=a[p]||[];return a[p]=h,h.push(c),()=>h.splice(h.indexOf(c),1)},f=(p,c,h)=>{e.set(p,c);const v=a[p];if(v)for(const E of v)E(c,h)},o=()=>{if(!k.has(e)&&(k.set(e,[r,Object.create(null),Object.create(null),Object.create(null),l,f,u]),!ie)){const p=s.initFocus(setTimeout.bind(_,et.bind(_,r,at))),c=s.initReconnect(setTimeout.bind(_,et.bind(_,r,ct)));i=()=>{p&&p(),c&&c(),k.delete(e)}}};return o(),[e,l,o,i]}return[e,k.get(e)[4]]},on=(e,t,s,r,l)=>{const i=s.errorRetryCount,a=l.retryCount,u=~~((Math.random()+.5)*(1<<(a<8?a:8)))*s.errorRetryInterval;!m(i)&&a>i||setTimeout(r,u,l)},an=be,[ht,cn]=rn(new Map),ln=z({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:on,onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ze?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ze?5e3:3e3,compare:an,isPaused:()=>!1,cache:ht,mutate:cn,fallback:{}},Zt),un=(e,t)=>{const s=z(e,t);if(t){const{use:r,fallback:l}=e,{use:i,fallback:a}=t;r&&i&&(s.use=r.concat(i)),l&&a&&(s.fallback=z(l,a))}return s},dn=g.createContext({}),fn="$inf$",mt=oe&&window.__SWR_DEVTOOLS_USE__,hn=mt?window.__SWR_DEVTOOLS_USE__:[],mn=()=>{mt&&(window.__SWR_DEVTOOLS_REACT__=Fe)},pt=e=>L(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],pn=()=>z(ln,g.useContext(dn)),vn=e=>(t,s,r)=>e(t,s&&((...i)=>{const[a]=ke(t),[,,,u]=k.get(ht);if(a.startsWith(fn))return s(...i);const f=u[a];return m(f)?s(...i):(delete u[a],f)}),r),Sn=hn.concat(vn),xn=e=>function(...s){const r=pn(),[l,i,a]=pt(s),u=un(r,a);let f=e;const{use:o}=u,p=(o||[]).concat(Sn);for(let c=p.length;c--;)f=p[c](f);return f(l,i||u.fetcher||null,u)},wn=(e,t,s)=>{const r=t[e]||(t[e]=[]);return r.push(s),()=>{const l=r.indexOf(s);l>=0&&(r[l]=r[r.length-1],r.pop())}},Tn=(e,t)=>(...s)=>{const[r,l,i]=pt(s),a=(i.use||[]).concat(t);return e(r,l,{...i,use:a})};mn();const Re=Fe.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Ee={dedupe:!0},jn=(e,t,s)=>{const{cache:r,compare:l,suspense:i,fallbackData:a,revalidateOnMount:u,revalidateIfStale:f,refreshInterval:o,refreshWhenHidden:p,refreshWhenOffline:c,keepPreviousData:h}=s,[v,E,S,$]=k.get(r),[d,ae]=ke(e),se=g.useRef(!1),U=g.useRef(!1),y=g.useRef(d),V=g.useRef(t),Y=g.useRef(s),j=()=>Y.current,X=()=>j().isVisible()&&j().isOnline(),[M,Q,q,T]=dt(r,d),Z=g.useRef({}).current,ce=m(a)?m(s.fallback)?_:s.fallback[d]:a,Pe=(w,x)=>{for(const C in Z){const R=C;if(R==="data"){if(!l(w[R],x[R])&&(!m(w[R])||!l(ue,x[R])))return!1}else if(x[R]!==w[R])return!1}return!0},Ue=g.useMemo(()=>{const w=!d||!t?!1:m(u)?j().isPaused()||i?!1:f!==!1:u,x=O=>{const A=z(O);return delete A._k,w?{isValidating:!0,isLoading:!0,...A}:A},C=M(),R=T(),I=x(C),ne=C===R?I:x(R);let b=I;return[()=>{const O=x(M());return Pe(O,b)?(b.data=O.data,b.isLoading=O.isLoading,b.isValidating=O.isValidating,b.error=O.error,b):(b=O,O)},()=>ne]},[r,d]),ee=qt.useSyncExternalStore(g.useCallback(w=>q(d,(x,C)=>{Pe(C,x)||w()}),[r,d]),Ue[0],Ue[1]),He=!se.current,St=v[d]&&v[d].length>0,te=ee.data,G=m(te)?ce&&ut(ce)?Re(ce):ce:te,le=ee.error,he=g.useRef(G),ue=h?m(te)?m(he.current)?G:he.current:te:G,ze=St&&!m(le)?!1:He&&!m(u)?u:j().isPaused()?!1:i?m(G)?!1:f:m(G)||f,Be=!!(d&&t&&He&&ze),xt=m(ee.isValidating)?Be:ee.isValidating,wt=m(ee.isLoading)?Be:ee.isLoading,re=g.useCallback(async w=>{const x=V.current;if(!d||!x||U.current||j().isPaused())return!1;let C,R,I=!0;const ne=w||{},b=!S[d]||!ne.dedupe,O=()=>Qe?!U.current&&d===y.current&&se.current:d===y.current,A={isValidating:!1,isLoading:!1},$e=()=>{Q(A)},qe=()=>{const D=S[d];D&&D[1]===R&&delete S[d]},Ge={isValidating:!0};m(M().data)&&(Ge.isLoading=!0);try{if(b&&(Q(Ge),s.loadingTimeout&&m(M().data)&&setTimeout(()=>{I&&O()&&j().onLoadingSlow(d,s)},s.loadingTimeout),S[d]=[x(ae),Te()]),[C,R]=S[d],C=await C,b&&setTimeout(qe,s.dedupingInterval),!S[d]||S[d][1]!==R)return b&&O()&&j().onDiscarded(d),!1;A.error=_;const D=E[d];if(!m(D)&&(R<=D[0]||R<=D[1]||D[1]===0))return $e(),b&&O()&&j().onDiscarded(d),!1;const N=M().data;A.data=l(N,C)?N:C,b&&O()&&j().onSuccess(C,d,s)}catch(D){qe();const N=j(),{shouldRetryOnError:me}=N;N.isPaused()||(A.error=D,b&&O()&&(N.onError(D,d,N),(me===!0||L(me)&&me(D))&&(!j().revalidateOnFocus||!j().revalidateOnReconnect||X())&&N.onErrorRetry(D,d,N,jt=>{const pe=v[d];pe&&pe[0]&&pe[0](Ye,jt)},{retryCount:(ne.retryCount||0)+1,dedupe:!0})))}return I=!1,$e(),!0},[d,r]),We=g.useCallback((...w)=>ft(r,y.current,...w),[]);if(we(()=>{V.current=t,Y.current=s,m(te)||(he.current=te)}),we(()=>{if(!d)return;const w=re.bind(_,Ee);let x=0;j().revalidateOnFocus&&(x=Date.now()+j().focusThrottleInterval);const R=wn(d,v,(I,ne={})=>{if(I==at){const b=Date.now();j().revalidateOnFocus&&b>x&&X()&&(x=b+j().focusThrottleInterval,w())}else if(I==ct)j().revalidateOnReconnect&&X()&&w();else{if(I==lt)return re();if(I==Ye)return re(ne)}});return U.current=!1,y.current=d,se.current=!0,Q({_k:ae}),ze&&(m(G)||ie?w():tn(w)),()=>{U.current=!0,R()}},[d]),we(()=>{let w;function x(){const R=L(o)?o(M().data):o;R&&w!==-1&&(w=setTimeout(C,R))}function C(){!M().error&&(p||j().isVisible())&&(c||j().isOnline())?re(Ee).then(x):x()}return x(),()=>{w&&(clearTimeout(w),w=-1)}},[o,p,c,d]),g.useDebugValue(ue),i&&m(G)&&d){if(!Qe&&ie)throw new Error("Fallback data is required when using Suspense in SSR.");V.current=t,Y.current=s,U.current=!1;const w=$[d];if(!m(w)){const x=We(w);Re(x)}if(m(le)){const x=re(Ee);m(ue)||(x.status="fulfilled",x.value=!0),Re(x)}else throw le}return{mutate:We,get data(){return Z.data=!0,ue},get error(){return Z.error=!0,le},get isValidating(){return Z.isValidating=!0,xt},get isLoading(){return Z.isLoading=!0,wt}}},gn=xn(jn);async function vt(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}async function Rn(e){return(await vt(e)).text()}async function En(e){return(await vt(e)).arrayBuffer()}async function bn(){const t=(await Rn("node-ids.txt")).split(`
`);let s;const r=await En("links.bin"),l=new DataView(r),i=[];for(let u=0;u<l.byteLength;u+=4){const f=l.getInt32(u,!0);if(f<0)s=-f-1;else{const o=f-1;i.push([t[s],t[o]])}}const a={};for(let u=0,f=i.length;u<f;u++){const[o,p]=i[u];a[o]??(a[o]=[]),a[o].push(p)}return a}function yn(){const e=B(),{val:t,recentlyVisited:s}=e,{data:r,isLoading:l,error:i}=gn("graph",()=>bn(),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),[a,u]=P("showSimilar",!0),[f,o]=P("showMoreSimilar",!0),p=Object.fromEntries(s.map(c=>[c.name,c]));return n.jsxs("div",{children:["Similar subreddits:",n.jsx(F,{onClick:()=>{u(!a)},children:a?n.jsx(Me,{className:"inline"}):n.jsx(Le,{className:"inline"})}),n.jsx(F,{className:"ml-1",onClick:()=>{o(!f)},children:f?"Show less":"Show more"}),a?n.jsxs(Ae,{children:[l?n.jsx("div",{children:"Loading"}):null,i?n.jsx("div",{className:"text-error",children:`${i}`}):null,r?n.jsx("div",{children:[...new Set(r[J(t).replace("r/","")]??[])].map(c=>`/r/${c}`).sort((c,h)=>{var v,E;return((((v=p[J(c)])==null?void 0:v.visitedCount)??0)-(((E=p[J(h)])==null?void 0:E.visitedCount)??0))*-1}).slice(0,f?1e3:10).map(c=>{var h;return n.jsxs(K,{onClick:()=>{e.setVal(c)},children:["- ",J(c)," (",((h=p[J(c)])==null?void 0:h.visitedCount)??0,")"]})})}):null]}):null]})}function In(){const e=B(),t=st();return n.jsxs(Bt,{children:[t?n.jsxs(n.Fragment,{children:[n.jsx(Rt,{}),n.jsx("hr",{})]}):null,n.jsx(yn,{}),n.jsx("hr",{}),n.jsx(Pt,{}),n.jsx("hr",{}),n.jsx(Ut,{}),n.jsx("hr",{}),n.jsx(kt,{}),n.jsx("hr",{}),n.jsxs(K,{onClick:()=>{e.setVal("savedposts")},children:[n.jsx(It,{className:"inline"})," Saved posts"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("multi")},children:[n.jsx(Ft,{className:"inline"})," Make list"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("blocked")},children:[n.jsx(Et,{className:"inline"})," Blocked users"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("about")},children:[n.jsx(bt,{className:"inline"})," About"]})]})}export{Dn as B,Vn as F,fn as I,In as S,_ as U,k as a,dt as b,ht as c,we as d,ke as e,L as f,It as g,m as i,qt as s,gn as u,Tn as w};
//# sourceMappingURL=Sidebar-Ds4ydn1i.js.map
