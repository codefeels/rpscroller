import{u as k,r as d,i as C,j as e,B as a,n as y,g as v}from"./index-cTNH9UGo.js";import{B,b as w,c as N}from"./BaseDialog-Zrczv-7L.js";import{f as L}from"./formatDistanceToNowStrict-B7etE4jS.js";import"./en-US-DK8Z8mF7.js";function R({open:S,onClose:h}){const x=k(),{recentlyVisited:b,favorites:u}=x,[r,j]=d.useState([]),[i,l]=d.useState(-1),[n,o]=d.useState(0),[m,D]=d.useState(""),[F,g]=d.useState(!0),c=Object.fromEntries(b.map(s=>[s.name,s])),A=[...u.filter(s=>!C(s.name)).sort((s,t)=>s.name.toLowerCase().localeCompare(t.name.toLowerCase())),...u.filter(s=>C(s.name)).sort((s,t)=>s.name.toLowerCase().localeCompare(t.name.toLowerCase()))].map(s=>{var t;return{...s,dateAdded:new Date(((t=c[s.name])==null?void 0:t.dateAdded)??new Date)}}).sort((s,t)=>{var p,f;return((((p=c[s.name])==null?void 0:p.visitedCount)??0)-(((f=c[t.name])==null?void 0:f.visitedCount)??0))*i}).sort((s,t)=>(+s.dateAdded-+t.dateAdded)*n);return e.jsx(B,{open:S,onClose:h,children:F?e.jsxs("div",{children:[e.jsx("h4",{children:"Make multi-reddit"}),e.jsxs("div",{children:[e.jsxs("div",{children:["Current feed: ",r.join(", ")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{onClick:()=>{g(!1)},children:"Create feed"}),e.jsx(a,{onClick:()=>{j([])},children:"Clear"})]})]}),e.jsx("div",{className:"max-h-[80vh] overflow-auto",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{className:"whitespace-nowrap",children:e.jsxs(a,{onClick:()=>{o(0),l(i===0?-1:i===-1?1:0)},children:["# Visits"," ",i===1?e.jsx(w,{className:"inline"}):i===-1?e.jsx(N,{className:"inline"}):null]})}),e.jsx("th",{className:"whitespace-nowrap",children:e.jsxs(a,{onClick:()=>{l(0),o(n===0?-1:n===-1?1:0)},children:["Date added"," ",n===1?e.jsx(w,{className:"inline"}):n===-1?e.jsx(N,{className:"inline"}):null]})})]})}),e.jsx("tbody",{children:A.map(s=>{var t;return e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap",children:e.jsx(a,{onClick:()=>{r.includes(v(s.name))||j([...r,v(s.name)])},children:y(s.name)})}),e.jsx("td",{children:(t=c[s.name])==null?void 0:t.visitedCount}),e.jsx("td",{children:L(s.dateAdded,{addSuffix:!0})})]},s.name)})})]})})]}):e.jsx("div",{className:"m-8",children:e.jsx("form",{onSubmit:s=>{s.preventDefault(),m&&(x.createFeed({subreddits:r,feedName:m}),h())},children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedname",children:"Feed name:"}),e.jsx("input",{id:"feedname",type:"text",className:"input",value:m,onChange:s=>{D(s.target.value)}}),e.jsx(a,{type:"submit",children:"Submit"})]})})})})}export{R as default};
//# sourceMappingURL=MakeMultiRedditDialog-BsSfNelW.js.map
