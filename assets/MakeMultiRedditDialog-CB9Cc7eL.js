import{l as z,m as k,o as O,p as F,q as w,t as N,v as g,w as y,x as I,y as M,u as B,r as D,i as p,j as s,B as v,z as b,n as R}from"./index-DphhH-tW.js";import{c as T,F as A,a as L}from"./index-Csi6VROk.js";import{B as U}from"./BaseDialog-mVphHhtf.js";function V(l,d,t){const C=I(),i=(t==null?void 0:t.locale)??C.locale??z,f=k(l,d);if(isNaN(f))throw new RangeError("Invalid time value");const n=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:f}),[o,c]=O(t==null?void 0:t.in,...f>0?[d,l]:[l,d]),r=F((t==null?void 0:t.roundingMethod)??"round"),m=c.getTime()-o.getTime(),u=m/M,S=w(c)-w(o),h=(m-S)/M,j=t==null?void 0:t.unit;let a;if(j?a=j:u<1?a="second":u<60?a="minute":u<N?a="hour":h<g?a="day":h<y?a="month":a="year",a==="second"){const e=r(m/1e3);return i.formatDistance("xSeconds",e,n)}else if(a==="minute"){const e=r(u);return i.formatDistance("xMinutes",e,n)}else if(a==="hour"){const e=r(u/60);return i.formatDistance("xHours",e,n)}else if(a==="day"){const e=r(h/N);return i.formatDistance("xDays",e,n)}else if(a==="month"){const e=r(h/g);return e===12&&j!=="month"?i.formatDistance("xYears",1,n):i.formatDistance("xMonths",e,n)}else{const e=r(h/y);return i.formatDistance("xYears",e,n)}}function E(l,d){return V(l,T(l),d)}function H({open:l,onClose:d}){const t=B(),{favorites:C}=t,[i,f]=D.useState([]),[n,o]=D.useState(-1),[c,r]=D.useState(0),[m,u]=D.useState(""),[S,h]=D.useState(!0),j=`/r/${i.map(e=>e.replace("user/","u_").replace("r/","")).join("+")}`,a=[...C.filter(e=>!p(e.name)).sort((e,x)=>e.name.toLowerCase().localeCompare(x.name.toLowerCase())),...C.filter(e=>p(e.name)).sort((e,x)=>e.name.toLowerCase().localeCompare(x.name.toLowerCase()))].map(e=>({...e,dateAdded:new Date(e.dateAdded)})).sort((e,x)=>(e.visitedCount-x.visitedCount)*n).sort((e,x)=>(+e.dateAdded-+x.dateAdded)*c);return s.jsx(U,{open:l,onClose:d,children:S?s.jsxs("div",{children:[s.jsxs("h4",{children:["Make multi-reddit",s.jsx("div",{children:s.jsxs("div",{children:[s.jsx("input",{id:"multireddit",readOnly:!0,type:"text",value:j}),s.jsx(v,{onClick:()=>{h(!1)},children:"Create list"}),s.jsx(v,{onClick:()=>{f([])},children:"Clear"})]})})]}),s.jsx("div",{className:"max-h-[80vh] overflow-auto",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{r(0),o(n===0?-1:n===-1?1:0)},children:["# Visits"," ",n===1?s.jsx(A,{className:"inline"}):n===-1?s.jsx(L,{className:"inline"}):null]})}),s.jsx("th",{className:"whitespace-nowrap",children:s.jsxs(v,{onClick:()=>{o(0),r(c===0?-1:c===-1?1:0)},children:["Date added"," ",c===1?s.jsx(A,{className:"inline"}):c===-1?s.jsx(L,{className:"inline"}):null]})})]})}),s.jsx("tbody",{children:a.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"whitespace-nowrap",children:s.jsx(v,{onClick:()=>{i.includes(b(e.name))||f([...i,b(e.name)])},children:R(e.name)})}),s.jsx("td",{children:e.visitedCount}),s.jsx("td",{children:E(e.dateAdded,{addSuffix:!0})})]},e.name))})]})})]}):s.jsx("div",{className:"m-8",children:s.jsx("form",{onSubmit:e=>{e.preventDefault(),m&&(t.addList(j,m),d())},children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"listname",children:"List name:"}),s.jsx("input",{autoFocus:!0,id:"listname",type:"text",value:m,onChange:e=>{u(e.target.value)}}),s.jsx(v,{type:"submit",children:"Submit"})]})})})})}export{H as default};
//# sourceMappingURL=MakeMultiRedditDialog-CB9Cc7eL.js.map
