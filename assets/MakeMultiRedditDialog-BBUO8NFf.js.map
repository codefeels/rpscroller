{"version":3,"file":"MakeMultiRedditDialog-BBUO8NFf.js","sources":["../../src/MakeMultiRedditDialog.tsx"],"sourcesContent":["import { useState } from 'react'\nimport {\n  isUserSubreddit,\n  normalizeForDisplay,\n  normalizeSubreddit,\n  useAppStore,\n} from './store'\n\nimport { formatDistanceToNowStrict } from 'date-fns'\n// icons\nimport { FaChevronDown, FaChevronUp } from 'react-icons/fa6'\n// components\nimport Button from './Button'\nimport BaseDialog from './BaseDialog'\n\nexport default function MakeMultiRedditDialog({\n  open,\n  onClose,\n}: {\n  open: boolean\n  onClose: () => void\n}) {\n  const store = useAppStore()\n  const { favorites } = store\n  const [multi, setMulti] = useState<string[]>([])\n  const [sortVisits, setSortVisits] = useState(-1)\n  const [sortDateAdded, setSortDateAdded] = useState(0)\n  const [listName, setListName] = useState('')\n  const [creatingList, setCreatingList] = useState(true)\n  const multiVal = `/r/${multi.map(s => s.replace('user/', 'u_').replace('r/', '')).join('+')}`\n  const favs = [\n    ...favorites\n      .filter(f => !isUserSubreddit(f.name))\n      .sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase())),\n    ...favorites\n      .filter(f => isUserSubreddit(f.name))\n      .sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase())),\n  ]\n    .map(f => ({ ...f, dateAdded: new Date(f.dateAdded) }))\n    .sort((a, b) => (a.visitedCount - b.visitedCount) * sortVisits)\n    .sort((a, b) => (+a.dateAdded - +b.dateAdded) * sortDateAdded)\n  return (\n    <BaseDialog open={open} onClose={onClose}>\n      {creatingList ? (\n        <div>\n          <h4>\n            Make multi-reddit\n            <div>\n              <div>\n                <input id=\"multireddit\" readOnly type=\"text\" value={multiVal} />\n                <Button\n                  onClick={() => {\n                    setCreatingList(false)\n                  }}\n                >\n                  Create list\n                </Button>\n                <Button\n                  onClick={() => {\n                    setMulti([])\n                  }}\n                >\n                  Clear\n                </Button>\n              </div>\n            </div>\n          </h4>\n\n          <div className=\"max-h-[80vh] overflow-auto\">\n            <table>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th className=\"whitespace-nowrap\">\n                    <Button\n                      onClick={() => {\n                        setSortDateAdded(0)\n                        if (sortVisits === 0) {\n                          setSortVisits(-1)\n                        } else if (sortVisits === -1) {\n                          setSortVisits(1)\n                        } else {\n                          setSortVisits(0)\n                        }\n                      }}\n                    >\n                      # Visits{' '}\n                      {sortVisits === 1 ? (\n                        <FaChevronUp className=\"inline\" />\n                      ) : sortVisits === -1 ? (\n                        <FaChevronDown className=\"inline\" />\n                      ) : null}\n                    </Button>\n                  </th>\n                  <th className=\"whitespace-nowrap\">\n                    <Button\n                      onClick={() => {\n                        setSortVisits(0)\n                        if (sortDateAdded === 0) {\n                          setSortDateAdded(-1)\n                        } else if (sortDateAdded === -1) {\n                          setSortDateAdded(1)\n                        } else {\n                          setSortDateAdded(0)\n                        }\n                      }}\n                    >\n                      Date added{' '}\n                      {sortDateAdded === 1 ? (\n                        <FaChevronUp className=\"inline\" />\n                      ) : sortDateAdded === -1 ? (\n                        <FaChevronDown className=\"inline\" />\n                      ) : null}\n                    </Button>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {favs.map(f => (\n                  <tr key={f.name}>\n                    <td className=\"whitespace-nowrap\">\n                      <Button\n                        onClick={() => {\n                          if (!multi.includes(normalizeSubreddit(f.name))) {\n                            setMulti([...multi, normalizeSubreddit(f.name)])\n                          }\n                        }}\n                      >\n                        {normalizeForDisplay(f.name)}\n                      </Button>\n                    </td>\n                    <td>{f.visitedCount}</td>\n                    <td>\n                      {formatDistanceToNowStrict(f.dateAdded, {\n                        addSuffix: true,\n                      })}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      ) : (\n        <div className=\"m-8\">\n          <form\n            onSubmit={event => {\n              event.preventDefault()\n              if (listName) {\n                store.addList(multiVal, listName)\n                onClose()\n              }\n            }}\n          >\n            <div>\n              <label htmlFor=\"listname\">List name:</label>\n              <input\n                autoFocus\n                id=\"listname\"\n                type=\"text\"\n                value={listName}\n                onChange={event => {\n                  setListName(event.target.value)\n                }}\n              />\n              <Button type=\"submit\">Submit</Button>\n            </div>\n          </form>\n        </div>\n      )}\n    </BaseDialog>\n  )\n}\n"],"names":["MakeMultiRedditDialog","open","onClose","store","useAppStore","favorites","multi","setMulti","useState","sortVisits","setSortVisits","sortDateAdded","setSortDateAdded","listName","setListName","creatingList","setCreatingList","multiVal","favs","f","isUserSubreddit","a","b","BaseDialog","jsxs","jsx","Button","FaChevronUp","FaChevronDown","normalizeSubreddit","normalizeForDisplay","formatDistanceToNowStrict","event"],"mappings":"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"}