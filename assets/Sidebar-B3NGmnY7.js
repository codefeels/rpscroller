const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SavedPostFeed-TIaMGPd2.js","./index-CwIPAeqK.js","./index-4Dlsw4Xn.css","./LoadingSpinner-D21VyinD.js","./BaseDialog-qaawN0uD.js","./Link-ftBKSUxN.js","./formatDistanceToNowStrict-B7etE4jS.js","./en-US-DK8Z8mF7.js","./RedditPostFeed-FeKHUB6_.js","./EditFeedDialog-wy7lbvVp.js"])))=>i.map(i=>d[i]);
import{u as L,j as r,r as E,_ as Me,G as q,L as Se,M as xt,a as gt,b as oe,B,n as te,i as K,c as Et,R as Ne,d as st,S as bt}from"./index-CwIPAeqK.js";import{F as jt,a as Rt,B as yt}from"./BaseDialog-qaawN0uD.js";const Ct=E.lazy(()=>Me(()=>import("./SavedPostFeed-TIaMGPd2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),Ot=E.lazy(()=>Me(()=>import("./RedditPostFeed-FeKHUB6_.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));function Ln(){const e=L(),{val:t}=e;return r.jsx(E.Suspense,{fallback:null,children:t==="savedposts"?r.jsx(Ct,{}):r.jsx(Ot,{})})}function _t(e){return q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Tn(e){return q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function rt(e){return q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function it(e){return q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Dt(e){return q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Vt(e){return q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Lt(e){return q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function ne({children:e,onClick:t}){return r.jsx("div",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer whitespace-nowrap",onClick:t,children:e})}function pe({children:e}){return r.jsx("div",{className:"border-b border-r-slate-600 pb-2 pt-2",children:e})}function Tt(){const e=L();return r.jsxs(pe,{children:[r.jsx(Se,{to:"/savedposts",children:r.jsxs(ne,{children:[r.jsx(Dt,{className:"inline"})," Saved posts"]})}),r.jsxs(ne,{onClick:()=>{e.setCurrentlyOpenDialog("multi")},children:[r.jsx(Vt,{className:"inline"})," Make list"]}),r.jsxs(ne,{onClick:()=>{e.setCurrentlyOpenDialog("blocked")},children:[r.jsx(xt,{className:"inline"})," Blocked users"]}),r.jsxs(ne,{onClick:()=>{e.setCurrentlyOpenDialog("about")},children:[r.jsx(gt,{className:"inline"})," About"]})]})}function se({label:e,localStorageKey:t,list:n}){const[s,a]=oe(t,!0),[i,o]=oe("showMore-"+t,!0);return r.jsxs(pe,{children:[r.jsxs("div",{className:"flex gap-1",children:[e,":",r.jsx(B,{onClick:()=>{a(!s)},children:s?r.jsx(jt,{className:"inline"}):r.jsx(Rt,{className:"inline"})}),r.jsx(B,{onClick:()=>{o(!i)},children:i?"Show less":"Show more"})]}),s?r.jsx("div",{children:n.length>0?n.slice(0,i?1e3:7).map(u=>r.jsx(Se,{to:u.name,children:r.jsxs(ne,{children:["- ",te(u.name),u.visitedCount?`(${u.visitedCount})`:""]})},u.name)):"No items"}):null]})}function Ft(){const e=L(),{favorites:t}=e;return r.jsx(se,{label:"Favorite subreddits",localStorageKey:"favSubreddits",list:t.filter(n=>!K(n.name))})}function It(){const e=L(),{favorites:t}=e;return r.jsx(se,{label:"Favorite users",localStorageKey:"favUsers",list:t.filter(n=>K(n.name))})}function At({children:e,onClick:t}){return r.jsx("span",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer m-1 whitespace-nowrap",onClick:t,children:e})}const Mt=E.lazy(()=>Me(()=>import("./EditFeedDialog-wy7lbvVp.js"),__vite__mapDeps([9,1,2,4]),import.meta.url));function Nt({feed:e}){const t=L(),[n,s]=E.useState(!1);return r.jsxs("div",{children:[r.jsx(Se,{to:`/r/${e.subreddits.join("+")}`,children:r.jsxs(At,{children:["- ",e.name]})}),r.jsx(B,{onClick:()=>{s(!0)},children:r.jsx(_t,{})}),r.jsx(B,{onClick:()=>{t.removeFeed(e.name)},children:r.jsx(Lt,{})}),n?r.jsx(E.Suspense,{fallback:null,children:r.jsx(Mt,{onClose:()=>{s(!1)},feed:e})}):null]})}function kt(){const e=L(),{feeds:t}=e,[n,s]=oe("showFeeds",!0);return t.length>0?r.jsxs(pe,{children:[r.jsxs("div",{children:["Feeds:"," ",r.jsx(B,{onClick:()=>{s(!n)},children:n?r.jsx(rt,{className:"inline"}):r.jsx(it,{className:"inline"})})]}),n?t.map(a=>r.jsx(Nt,{feed:a},a.name)):null]}):null}function Pt(){const e=L(),{recentlyVisited:t}=e,n=new Set(e.feeds.map(s=>`r/${s.subreddits.join("+")}`));return r.jsx(se,{list:t.filter(s=>!K(s.name)).sort((s,a)=>a.visitedCount-s.visitedCount).filter(s=>!n.has(s.name)),label:"Most visited subreddits",localStorageKey:"mostVisitedSubreddits"})}function Ht(){const e=L(),{recentlyVisited:t}=e,n=new Set(e.feeds.map(s=>`r/${s.subreddits.join("+")}`));return r.jsx(se,{list:t.filter(s=>K(s.name)).sort((s,a)=>a.visitedCount-s.visitedCount).filter(s=>!n.has(s.name)),label:"Most visited users",localStorageKey:"mostVisitedUsers"})}function $t(){const e=L(),{recentlyVisited:t}=e,n=new Set(e.feeds.map(s=>`r/${s.subreddits.join("+")}`));return r.jsx(se,{label:"Recently visited subreddits",localStorageKey:"recentlyVisitedSubreddits",list:t.filter(s=>!K(s.name)).filter(s=>!n.has(s.name))})}function Wt(){const e=L(),{recentlyVisited:t}=e,n=new Set(e.feeds.map(s=>`r/${s.subreddits.join("+")}`));return r.jsx(se,{label:"Recently visited users",localStorageKey:"recentlyVisitedUsers",list:t.filter(s=>K(s.name)).filter(s=>!n.has(s.name))})}var ge={exports:{}},Ee={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function zt(){if(Ye)return Ee;Ye=1;var e=Et();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function u(c,d){var m=d(),j=s({inst:{value:m,getSnapshot:d}}),S=j[0].inst,W=j[1];return i(function(){S.value=m,S.getSnapshot=d,f(S)&&W({inst:S})},[c,m,d]),a(function(){return f(S)&&W({inst:S}),c(function(){f(S)&&W({inst:S})})},[c]),o(m),m}function f(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!n(c,m)}catch{return!0}}function x(c,d){return d()}var w=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:u;return Ee.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:w,Ee}var Xe;function Ut(){return Xe||(Xe=1,ge.exports=zt()),ge.exports}var Bt=Ut();const ot=0,at=1,ct=2,Qe=3;var Ze=Object.prototype.hasOwnProperty;function _e(e,t){var n,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&_e(e[s],t[s]););return s===-1}if(!n||typeof e=="object"){s=0;for(n in e)if(Ze.call(e,n)&&++s&&!Ze.call(t,n)||!(n in t)||!_e(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!==e&&t!==t}const k=new WeakMap,H=()=>{},_=H(),De=Object,h=e=>e===_,A=e=>typeof e=="function",$=(e,t)=>({...e,...t}),lt=e=>A(e.then),be={},he={},ke="undefined",ce=typeof window!=ke,Ve=typeof document!=ke,qt=ce&&"Deno"in window,Kt=()=>ce&&typeof window.requestAnimationFrame!=ke,ut=(e,t)=>{const n=k.get(e);return[()=>!h(t)&&e.get(t)||be,s=>{if(!h(t)){const a=e.get(t);t in he||(he[t]=a),n[5](t,$(a,s),a||be)}},n[6],()=>!h(t)&&t in he?he[t]:!h(t)&&e.get(t)||be]};let Le=!0;const Gt=()=>Le,[Te,Fe]=ce&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],Jt=()=>{const e=Ve&&document.visibilityState;return h(e)||e!=="hidden"},Yt=e=>(Ve&&document.addEventListener("visibilitychange",e),Te("focus",e),()=>{Ve&&document.removeEventListener("visibilitychange",e),Fe("focus",e)}),Xt=e=>{const t=()=>{Le=!0,e()},n=()=>{Le=!1};return Te("online",t),Te("offline",n),()=>{Fe("online",t),Fe("offline",n)}},Qt={isOnline:Gt,isVisible:Jt},Zt={initFocus:Yt,initReconnect:Xt},et=!Ne.useId,ae=!ce||qt,en=e=>Kt()?window.requestAnimationFrame(e):setTimeout(e,1),je=ae?E.useEffect:E.useLayoutEffect,Re=typeof navigator<"u"&&navigator.connection,tt=!ae&&Re&&(["slow-2g","2g"].includes(Re.effectiveType)||Re.saveData),me=new WeakMap,ye=(e,t)=>De.prototype.toString.call(e)===`[object ${t}]`;let tn=0;const Ie=e=>{const t=typeof e,n=ye(e,"Date"),s=ye(e,"RegExp"),a=ye(e,"Object");let i,o;if(De(e)===e&&!n&&!s){if(i=me.get(e),i)return i;if(i=++tn+"~",me.set(e,i),Array.isArray(e)){for(i="@",o=0;o<e.length;o++)i+=Ie(e[o])+",";me.set(e,i)}if(a){i="#";const u=De.keys(e).sort();for(;!h(o=u.pop());)h(e[o])||(i+=o+":"+Ie(e[o])+",");me.set(e,i)}}else i=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Pe=e=>{if(A(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Ie(e):"",[e,t]};let nn=0;const Ae=()=>++nn;async function dt(...e){const[t,n,s,a]=e,i=$({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{});let o=i.populateCache;const u=i.rollbackOnError;let f=i.optimisticData;const x=d=>typeof u=="function"?u(d):u!==!1,w=i.throwOnError;if(A(n)){const d=n,m=[],j=t.keys();for(const S of j)!/^\$(inf|sub)\$/.test(S)&&d(t.get(S)._k)&&m.push(S);return Promise.all(m.map(c))}return c(n);async function c(d){const[m]=Pe(d);if(!m)return;const[j,S]=ut(t,m),[W,l,le,re]=k.get(t),P=()=>{const T=W[m];return(A(i.revalidate)?i.revalidate(j().data,d):i.revalidate!==!1)&&(delete le[m],delete re[m],T&&T[0])?T[0](ct).then(()=>j().data):j().data};if(e.length<3)return P();let y=s,D;const G=Ae();l[m]=[G,0];const g=!h(f),J=j(),I=J.data,Y=J._c,z=h(Y)?I:Y;if(g&&(f=A(f)?f(z,I):f,S({data:f,_c:z})),A(y))try{y=y(z)}catch(T){D=T}if(y&&lt(y))if(y=await y.catch(T=>{D=T}),G!==l[m][0]){if(D)throw D;return y}else D&&g&&x(D)&&(o=!0,S({data:z,_c:_}));if(o&&!D)if(A(o)){const T=o(y,z);S({data:T,error:_,_c:_})}else S({data:y,error:_,_c:_});if(l[m][1]=Ae(),Promise.resolve(P()).then(()=>{S({_c:_})}),D){if(w)throw D;return}return y}}const nt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},sn=(e,t)=>{if(!k.has(e)){const n=$(Zt,t),s=Object.create(null),a=dt.bind(_,e);let i=H;const o=Object.create(null),u=(w,c)=>{const d=o[w]||[];return o[w]=d,d.push(c),()=>d.splice(d.indexOf(c),1)},f=(w,c,d)=>{e.set(w,c);const m=o[w];if(m)for(const j of m)j(c,d)},x=()=>{if(!k.has(e)&&(k.set(e,[s,Object.create(null),Object.create(null),Object.create(null),a,f,u]),!ae)){const w=n.initFocus(setTimeout.bind(_,nt.bind(_,s,ot))),c=n.initReconnect(setTimeout.bind(_,nt.bind(_,s,at)));i=()=>{w&&w(),c&&c(),k.delete(e)}}};return x(),[e,a,x,i]}return[e,k.get(e)[4]]},rn=(e,t,n,s,a)=>{const i=n.errorRetryCount,o=a.retryCount,u=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!h(i)&&o>i||setTimeout(s,u,a)},on=_e,[ft,an]=sn(new Map),cn=$({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:rn,onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:tt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:tt?5e3:3e3,compare:on,isPaused:()=>!1,cache:ft,mutate:an,fallback:{}},Qt),ln=(e,t)=>{const n=$(e,t);if(t){const{use:s,fallback:a}=e,{use:i,fallback:o}=t;s&&i&&(n.use=s.concat(i)),a&&o&&(n.fallback=$(a,o))}return n},un=E.createContext({}),dn="$inf$",ht=ce&&window.__SWR_DEVTOOLS_USE__,fn=ht?window.__SWR_DEVTOOLS_USE__:[],hn=()=>{ht&&(window.__SWR_DEVTOOLS_REACT__=Ne)},mt=e=>A(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],mn=()=>$(cn,E.useContext(un)),Sn=e=>(t,n,s)=>e(t,n&&((...i)=>{const[o]=Pe(t),[,,,u]=k.get(ft);if(o.startsWith(dn))return n(...i);const f=u[o];return h(f)?n(...i):(delete u[o],f)}),s),pn=fn.concat(Sn),vn=e=>function(...n){const s=mn(),[a,i,o]=mt(n),u=ln(s,o);let f=e;const{use:x}=u,w=(x||[]).concat(pn);for(let c=w.length;c--;)f=w[c](f);return f(a,i||u.fetcher||null,u)},wn=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const a=s.indexOf(n);a>=0&&(s[a]=s[s.length-1],s.pop())}},Fn=(e,t)=>(...n)=>{const[s,a,i]=mt(n),o=(i.use||[]).concat(t);return e(s,a,{...i,use:o})};hn();const Ce=Ne.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Oe={dedupe:!0},xn=(e,t,n)=>{const{cache:s,compare:a,suspense:i,fallbackData:o,revalidateOnMount:u,revalidateIfStale:f,refreshInterval:x,refreshWhenHidden:w,refreshWhenOffline:c,keepPreviousData:d}=n,[m,j,S,W]=k.get(s),[l,le]=Pe(e),re=E.useRef(!1),P=E.useRef(!1),y=E.useRef(l),D=E.useRef(t),G=E.useRef(n),g=()=>G.current,J=()=>g().isVisible()&&g().isOnline(),[I,Y,z,T]=ut(s,l),X=E.useRef({}).current,ue=h(o)?h(n.fallback)?_:n.fallback[l]:o,$e=(v,p)=>{for(const C in X){const b=C;if(b==="data"){if(!a(v[b],p[b])&&(!h(v[b])||!a(fe,p[b])))return!1}else if(p[b]!==v[b])return!1}return!0},We=E.useMemo(()=>{const v=!l||!t?!1:h(u)?g().isPaused()||i?!1:f!==!1:u,p=O=>{const M=$(O);return delete M._k,v?{isValidating:!0,isLoading:!0,...M}:M},C=I(),b=T(),F=p(C),ee=C===b?F:p(b);let R=F;return[()=>{const O=p(I());return $e(O,R)?(R.data=O.data,R.isLoading=O.isLoading,R.isValidating=O.isValidating,R.error=O.error,R):(R=O,O)},()=>ee]},[s,l]),Q=Bt.useSyncExternalStore(E.useCallback(v=>z(l,(p,C)=>{$e(C,p)||v()}),[s,l]),We[0],We[1]),ze=!re.current,St=m[l]&&m[l].length>0,Z=Q.data,U=h(Z)?ue&&lt(ue)?Ce(ue):ue:Z,de=Q.error,ve=E.useRef(U),fe=d?h(Z)?h(ve.current)?U:ve.current:Z:U,Ue=St&&!h(de)?!1:ze&&!h(u)?u:g().isPaused()?!1:i?h(U)?!1:f:h(U)||f,Be=!!(l&&t&&ze&&Ue),pt=h(Q.isValidating)?Be:Q.isValidating,vt=h(Q.isLoading)?Be:Q.isLoading,ie=E.useCallback(async v=>{const p=D.current;if(!l||!p||P.current||g().isPaused())return!1;let C,b,F=!0;const ee=v||{},R=!S[l]||!ee.dedupe,O=()=>et?!P.current&&l===y.current&&re.current:l===y.current,M={isValidating:!1,isLoading:!1},Ke=()=>{Y(M)},Ge=()=>{const V=S[l];V&&V[1]===b&&delete S[l]},Je={isValidating:!0};h(I().data)&&(Je.isLoading=!0);try{if(R&&(Y(Je),n.loadingTimeout&&h(I().data)&&setTimeout(()=>{F&&O()&&g().onLoadingSlow(l,n)},n.loadingTimeout),S[l]=[p(le),Ae()]),[C,b]=S[l],C=await C,R&&setTimeout(Ge,n.dedupingInterval),!S[l]||S[l][1]!==b)return R&&O()&&g().onDiscarded(l),!1;M.error=_;const V=j[l];if(!h(V)&&(b<=V[0]||b<=V[1]||V[1]===0))return Ke(),R&&O()&&g().onDiscarded(l),!1;const N=I().data;M.data=a(N,C)?N:C,R&&O()&&g().onSuccess(C,l,n)}catch(V){Ge();const N=g(),{shouldRetryOnError:we}=N;N.isPaused()||(M.error=V,R&&O()&&(N.onError(V,l,N),(we===!0||A(we)&&we(V))&&(!g().revalidateOnFocus||!g().revalidateOnReconnect||J())&&N.onErrorRetry(V,l,N,wt=>{const xe=m[l];xe&&xe[0]&&xe[0](Qe,wt)},{retryCount:(ee.retryCount||0)+1,dedupe:!0})))}return F=!1,Ke(),!0},[l,s]),qe=E.useCallback((...v)=>dt(s,y.current,...v),[]);if(je(()=>{D.current=t,G.current=n,h(Z)||(ve.current=Z)}),je(()=>{if(!l)return;const v=ie.bind(_,Oe);let p=0;g().revalidateOnFocus&&(p=Date.now()+g().focusThrottleInterval);const b=wn(l,m,(F,ee={})=>{if(F==ot){const R=Date.now();g().revalidateOnFocus&&R>p&&J()&&(p=R+g().focusThrottleInterval,v())}else if(F==at)g().revalidateOnReconnect&&J()&&v();else{if(F==ct)return ie();if(F==Qe)return ie(ee)}});return P.current=!1,y.current=l,re.current=!0,Y({_k:le}),Ue&&(h(U)||ae?v():en(v)),()=>{P.current=!0,b()}},[l]),je(()=>{let v;function p(){const b=A(x)?x(I().data):x;b&&v!==-1&&(v=setTimeout(C,b))}function C(){!I().error&&(w||g().isVisible())&&(c||g().isOnline())?ie(Oe).then(p):p()}return p(),()=>{v&&(clearTimeout(v),v=-1)}},[x,w,c,l]),E.useDebugValue(fe),i&&h(U)&&l){if(!et&&ae)throw new Error("Fallback data is required when using Suspense in SSR.");D.current=t,G.current=n,P.current=!1;const v=W[l];if(!h(v)){const p=qe(v);Ce(p)}if(h(de)){const p=ie(Oe);h(fe)||(p.status="fulfilled",p.value=!0),Ce(p)}else throw de}return{mutate:qe,get data(){return X.data=!0,fe},get error(){return X.error=!0,de},get isValidating(){return X.isValidating=!0,pt},get isLoading(){return X.isLoading=!0,vt}}},gn=vn(xn);async function He(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}async function En(e){return(await He(e)).text()}async function bn(e){return(await He(e)).arrayBuffer()}async function In(e){return(await He(e)).json()}async function jn(){const t=(await En("node-ids.txt")).split(`
`);let n;const s=await bn("links.bin"),a=new DataView(s),i=[];for(let u=0;u<a.byteLength;u+=4){const f=a.getInt32(u,!0);if(f<0)n=-f-1;else{const x=f-1;i.push([t[n],t[x]])}}const o={};for(let u=0,f=i.length;u<f;u++){const[x,w]=i[u];o[x]??(o[x]=[]),o[x].push(w)}return o}function Rn(){const e=L(),{val:t,recentlyVisited:n}=e,{data:s,isLoading:a,error:i}=gn("graph",()=>jn(),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),[o,u]=oe("showSimilar",!0),[f,x]=oe("showMoreSimilar",!0),w=Object.fromEntries(n.map(c=>[c.name,c]));return K(t)?null:r.jsxs(pe,{children:[r.jsxs("div",{children:["Similar subreddits:",r.jsx(B,{onClick:()=>{u(!o)},children:o?r.jsx(rt,{className:"inline"}):r.jsx(it,{className:"inline"})}),r.jsx(B,{className:"ml-1",onClick:()=>{x(!f)},children:f?"Show less":"Show more"})]}),o?r.jsxs("div",{children:[a?r.jsx("div",{children:"Loading"}):null,i?r.jsx("div",{className:"text-error",children:`${i}`}):null,s?r.jsx("div",{children:[...new Set(s[te(t).replace("r/","")]??[])].map(c=>`/r/${c}`).sort((c,d)=>{var m,j;return((((m=w[te(c)])==null?void 0:m.visitedCount)??0)-(((j=w[te(d)])==null?void 0:j.visitedCount)??0))*-1}).slice(0,f?1e3:7).map(c=>{var d;return r.jsx(Se,{to:c,children:r.jsxs(ne,{children:["- ",te(c)," (",((d=w[te(c)])==null?void 0:d.visitedCount)??0,")"]})},c)})}):null]}):null]})}function yn({children:e}){return r.jsx("div",{className:"mt-3 mb-20",children:e})}function Cn({children:e}){const t=L();return r.jsx(yt,{open:!0,onClose:()=>{t.setSidebarOpen(!1)},children:r.jsx("div",{className:"w-screen h-screen",children:e})})}function On({children:e}){return st()?r.jsx(Cn,{children:e}):r.jsx(yn,{children:e})}function An(){const e=st();return r.jsxs(On,{children:[e?r.jsx(bt,{}):null,r.jsx(Rn,{}),r.jsx(Pt,{}),r.jsx(Ht,{}),r.jsx($t,{}),r.jsx(Wt,{}),r.jsx(Ft,{}),r.jsx(It,{}),r.jsx(kt,{}),r.jsx(Tt,{})]})}export{Ln as F,dn as I,An as S,_ as U,k as a,ut as b,ft as c,je as d,Pe as e,A as f,Tn as g,Dt as h,h as i,In as m,Bt as s,gn as u,Fn as w};
//# sourceMappingURL=Sidebar-B3NGmnY7.js.map
