const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SavedPostFeed-De-2Ewfb.js","./index-CUolLGfm.js","./index-CKLVmWrM.css","./LoadingSpinner-DTbwDcj7.js","./BaseDialog-rdzSPy43.js","./Link-sITGKVCc.js","./formatDistanceToNowStrict-B7etE4jS.js","./en-US-DK8Z8mF7.js","./RedditPostFeed-Bwu6Vjow.js","./EditFeedDialog-D1n_d9w8.js"])))=>i.map(i=>d[i]);
import{u as B,j as n,r as g,_ as Le,G as z,L as oe,M as Rt,a as yt,B as I,b as P,m as nt,i as Fe,n as J,c as bt,R as Ae,d as st,S as Ct}from"./index-CUolLGfm.js";import{B as rt,F as it,a as ot,b as Ot}from"./BaseDialog-rdzSPy43.js";const Dt=g.lazy(()=>Le(()=>import("./SavedPostFeed-De-2Ewfb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),_t=g.lazy(()=>Le(()=>import("./RedditPostFeed-Bwu6Vjow.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));function Mn(){const e=B(),{val:t}=e;return n.jsx(g.Suspense,{fallback:null,children:t==="savedposts"?n.jsx(Dt,{}):n.jsx(_t,{})})}function Vt(e){return z({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function at(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function ct(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Tt(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Mt(e){return z({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function It(e){return z({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function K({children:e,onClick:t}){return n.jsx("div",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer whitespace-nowrap",onClick:t,children:e})}function ae({children:e}){return n.jsx("div",{className:"border-b border-r-slate-600 pb-2 pt-2",children:e})}function Lt(){const e=B();return n.jsxs(ae,{children:[n.jsx(oe,{to:"/savedposts",children:n.jsxs(K,{children:[n.jsx(Tt,{className:"inline"})," Saved posts"]})}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("multi")},children:[n.jsx(Mt,{className:"inline"})," Make list"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("blocked")},children:[n.jsx(Rt,{className:"inline"})," Blocked users"]}),n.jsxs(K,{onClick:()=>{e.setCurrentlyOpenDialog("about")},children:[n.jsx(yt,{className:"inline"})," About"]})]})}function Ft({children:e,onClick:t}){return n.jsx("span",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer m-1 whitespace-nowrap",onClick:t,children:e})}const At=g.lazy(()=>Le(()=>import("./EditFeedDialog-D1n_d9w8.js"),__vite__mapDeps([9,1,2,4]),import.meta.url));function Nt({feed:e}){const t=B(),[s,r]=g.useState(!1);return n.jsxs("div",{children:[n.jsx(oe,{to:`/r/${e.subreddits.join("+")}`,children:n.jsxs(Ft,{children:["- ",e.name]})}),n.jsx(I,{onClick:()=>{r(!0)},children:n.jsx(Vt,{})}),n.jsx(I,{onClick:()=>{t.removeFeed(e.name)},children:n.jsx(It,{})}),s?n.jsx(g.Suspense,{fallback:null,children:n.jsx(At,{onClose:()=>{r(!1)},feed:e})}):null]})}function kt(){const e=B(),{feeds:t}=e,[s,r]=P("showFeeds",!0);return t.length>0?n.jsxs(ae,{children:[n.jsxs("div",{children:["Feeds:"," ",n.jsx(I,{onClick:()=>{r(!s)},children:s?n.jsx(at,{className:"inline"}):n.jsx(ct,{className:"inline"})})]}),s?t.map(l=>n.jsx(Nt,{feed:l},l.name)):null]}):null}function Pt(e){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 20h2V8h3L8 4 4 8h3zm13-4h-3V4h-2v12h-3l4 4z"},child:[]}]})(e)}function In(e){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 14h4v7a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-7h4a1.001 1.001 0 0 0 .781-1.625l-8-10c-.381-.475-1.181-.475-1.562 0l-8 10A1.001 1.001 0 0 0 4 14z"},child:[]}]})(e)}function Ut({id:e,checked:t,onChange:s,label:r}){return n.jsxs("div",{children:[n.jsx("input",{id:e,type:"radio",checked:t,onChange:s,className:"radio radio-sm mr-2"}),n.jsx("label",{htmlFor:e,children:r})]})}const Ht={recentlyVisited:"Sort by recently visited",visitedCount:"Sort by most visited"};function lt({sortMode:e,setSortMode:t,onClose:s}){return n.jsx(rt,{open:!0,onClose:()=>{s()},children:n.jsx("ul",{children:Object.entries(Ht).map(([r,l])=>n.jsx("li",{children:n.jsx(Ut,{id:r,checked:r===e,label:l,onChange:i=>{i.target.checked&&t(r)}})},r))})})}function Wt(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(o=>`r/${o.subreddits.join("+")}`)),[r,l]=P("showRecentlyVisitedSubreddits",!0),[i,a]=P("showMoreRecentlyVisitedSubreddits",!0),[u,f]=P("sortMode","recentlyVisited"),[S,p]=g.useState(!1),c=nt(t.filter(o=>!Fe(o.name)),u==="visitedCount",(o,h)=>h.visitedCount-o.visitedCount).slice(0,i?1e3:7).filter(o=>!s.has(o.name));return n.jsxs(ae,{children:[n.jsxs("div",{className:"flex gap-1",children:[u==="recentlyVisited"?"Recently visited":"Most visited"," ","subs:",n.jsx(I,{onClick:()=>{l(!r)},children:r?n.jsx(it,{className:"inline"}):n.jsx(ot,{className:"inline"})}),n.jsx(I,{onClick:()=>{p(!0)},children:n.jsx(Pt,{})}),n.jsx(I,{onClick:()=>{a(!i)},children:i?"Show less":"Show more"})]}),r?n.jsx("div",{children:c.length>0?c.map(o=>n.jsx(oe,{to:o.name,children:n.jsxs(K,{children:["- ",J(o.name)," (",o.visitedCount,")"]})},o.name)):"No items"}):null,S?n.jsx(lt,{sortMode:u,setSortMode:f,onClose:()=>{p(!1)}}):null]})}function Bt(){const e=B(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(o=>`r/${o.subreddits.join("+")}`)),[r,l]=P("showRecentlyVisitedUsers",!0),[i,a]=P("showMoreRecentlyVisitedUsers",!0),[u,f]=P("sortMode","recentlyVisited"),[S,p]=g.useState(!1),c=nt(t.filter(o=>Fe(o.name)),u==="visitedCount",(o,h)=>h.visitedCount-o.visitedCount).slice(0,i?1e3:7).filter(o=>!s.has(o.name));return n.jsxs(ae,{children:[n.jsxs("div",{className:"flex gap-1",children:[u==="recentlyVisited"?"Recently visited":"Most visited"," ","users:",n.jsx(I,{onClick:()=>{l(!r)},children:r?n.jsx(it,{className:"inline"}):n.jsx(ot,{className:"inline"})}),n.jsx(I,{onClick:()=>{p(!0)},children:n.jsx(Ot,{})}),n.jsx(I,{onClick:()=>{a(!i)},children:i?"Show less":"Show more"})]}),r?n.jsx("div",{children:c.length>0?c.map(o=>n.jsx(oe,{to:o.name,children:n.jsxs(K,{children:["- ",J(o.name)," (",o.visitedCount,")"]})},o.name)):"No items"}):null,S?n.jsx(lt,{sortMode:u,setSortMode:f,onClose:()=>{p(!1)}}):null]})}var xe={exports:{}},we={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ke;function zt(){if(Ke)return we;Ke=1;var e=bt();function t(c,o){return c===o&&(c!==0||1/c===1/o)||c!==c&&o!==o}var s=typeof Object.is=="function"?Object.is:t,r=e.useState,l=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function u(c,o){var h=o(),R=r({inst:{value:h,getSnapshot:o}}),v=R[0].inst,$=R[1];return i(function(){v.value=h,v.getSnapshot=o,f(v)&&$({inst:v})},[c,h,o]),l(function(){return f(v)&&$({inst:v}),c(function(){f(v)&&$({inst:v})})},[c]),a(h),h}function f(c){var o=c.getSnapshot;c=c.value;try{var h=o();return!s(c,h)}catch{return!0}}function S(c,o){return o()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:u;return we.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,we}var Ye;function $t(){return Ye||(Ye=1,xe.exports=zt()),xe.exports}var qt=$t();const ut=0,dt=1,ft=2,Xe=3;var Qe=Object.prototype.hasOwnProperty;function Ce(e,t){var s,r;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((r=e.length)===t.length)for(;r--&&Ce(e[r],t[r]););return r===-1}if(!s||typeof e=="object"){r=0;for(s in e)if(Qe.call(e,s)&&++r&&!Qe.call(t,s)||!(s in t)||!Ce(e[s],t[s]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const k=new WeakMap,H=()=>{},D=H(),Oe=Object,m=e=>e===D,F=e=>typeof e=="function",W=(e,t)=>({...e,...t}),ht=e=>F(e.then),ge={},he={},Ne="undefined",ce=typeof window!=Ne,De=typeof document!=Ne,Gt=ce&&"Deno"in window,Jt=()=>ce&&typeof window.requestAnimationFrame!=Ne,mt=(e,t)=>{const s=k.get(e);return[()=>!m(t)&&e.get(t)||ge,r=>{if(!m(t)){const l=e.get(t);t in he||(he[t]=l),s[5](t,W(l,r),l||ge)}},s[6],()=>!m(t)&&t in he?he[t]:!m(t)&&e.get(t)||ge]};let _e=!0;const Kt=()=>_e,[Ve,Te]=ce&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],Yt=()=>{const e=De&&document.visibilityState;return m(e)||e!=="hidden"},Xt=e=>(De&&document.addEventListener("visibilitychange",e),Ve("focus",e),()=>{De&&document.removeEventListener("visibilitychange",e),Te("focus",e)}),Qt=e=>{const t=()=>{_e=!0,e()},s=()=>{_e=!1};return Ve("online",t),Ve("offline",s),()=>{Te("online",t),Te("offline",s)}},Zt={isOnline:Kt,isVisible:Yt},en={initFocus:Xt,initReconnect:Qt},Ze=!Ae.useId,ie=!ce||Gt,tn=e=>Jt()?window.requestAnimationFrame(e):setTimeout(e,1),je=ie?g.useEffect:g.useLayoutEffect,Ee=typeof navigator<"u"&&navigator.connection,et=!ie&&Ee&&(["slow-2g","2g"].includes(Ee.effectiveType)||Ee.saveData),me=new WeakMap,Re=(e,t)=>Oe.prototype.toString.call(e)===`[object ${t}]`;let nn=0;const Me=e=>{const t=typeof e,s=Re(e,"Date"),r=Re(e,"RegExp"),l=Re(e,"Object");let i,a;if(Oe(e)===e&&!s&&!r){if(i=me.get(e),i)return i;if(i=++nn+"~",me.set(e,i),Array.isArray(e)){for(i="@",a=0;a<e.length;a++)i+=Me(e[a])+",";me.set(e,i)}if(l){i="#";const u=Oe.keys(e).sort();for(;!m(a=u.pop());)m(e[a])||(i+=a+":"+Me(e[a])+",");me.set(e,i)}}else i=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},ke=e=>{if(F(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Me(e):"",[e,t]};let sn=0;const Ie=()=>++sn;async function pt(...e){const[t,s,r,l]=e,i=W({populateCache:!0,throwOnError:!0},typeof l=="boolean"?{revalidate:l}:l||{});let a=i.populateCache;const u=i.rollbackOnError;let f=i.optimisticData;const S=o=>typeof u=="function"?u(o):u!==!1,p=i.throwOnError;if(F(s)){const o=s,h=[],R=t.keys();for(const v of R)!/^\$(inf|sub)\$/.test(v)&&o(t.get(v)._k)&&h.push(v);return Promise.all(h.map(c))}return c(s);async function c(o){const[h]=ke(o);if(!h)return;const[R,v]=mt(t,h),[$,d,le,se]=k.get(t),U=()=>{const T=$[h];return(F(i.revalidate)?i.revalidate(R().data,o):i.revalidate!==!1)&&(delete le[h],delete se[h],T&&T[0])?T[0](ft).then(()=>R().data):R().data};if(e.length<3)return U();let b=r,_;const Y=Ie();d[h]=[Y,0];const j=!m(f),X=R(),L=X.data,Q=X._c,q=m(Q)?L:Q;if(j&&(f=F(f)?f(q,L):f,v({data:f,_c:q})),F(b))try{b=b(q)}catch(T){_=T}if(b&&ht(b))if(b=await b.catch(T=>{_=T}),Y!==d[h][0]){if(_)throw _;return b}else _&&j&&S(_)&&(a=!0,v({data:q,_c:D}));if(a&&!_)if(F(a)){const T=a(b,q);v({data:T,error:D,_c:D})}else v({data:b,error:D,_c:D});if(d[h][1]=Ie(),Promise.resolve(U()).then(()=>{v({_c:D})}),_){if(p)throw _;return}return b}}const tt=(e,t)=>{for(const s in e)e[s][0]&&e[s][0](t)},rn=(e,t)=>{if(!k.has(e)){const s=W(en,t),r=Object.create(null),l=pt.bind(D,e);let i=H;const a=Object.create(null),u=(p,c)=>{const o=a[p]||[];return a[p]=o,o.push(c),()=>o.splice(o.indexOf(c),1)},f=(p,c,o)=>{e.set(p,c);const h=a[p];if(h)for(const R of h)R(c,o)},S=()=>{if(!k.has(e)&&(k.set(e,[r,Object.create(null),Object.create(null),Object.create(null),l,f,u]),!ie)){const p=s.initFocus(setTimeout.bind(D,tt.bind(D,r,ut))),c=s.initReconnect(setTimeout.bind(D,tt.bind(D,r,dt)));i=()=>{p&&p(),c&&c(),k.delete(e)}}};return S(),[e,l,S,i]}return[e,k.get(e)[4]]},on=(e,t,s,r,l)=>{const i=s.errorRetryCount,a=l.retryCount,u=~~((Math.random()+.5)*(1<<(a<8?a:8)))*s.errorRetryInterval;!m(i)&&a>i||setTimeout(r,u,l)},an=Ce,[St,cn]=rn(new Map),ln=W({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:on,onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:et?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:et?5e3:3e3,compare:an,isPaused:()=>!1,cache:St,mutate:cn,fallback:{}},Zt),un=(e,t)=>{const s=W(e,t);if(t){const{use:r,fallback:l}=e,{use:i,fallback:a}=t;r&&i&&(s.use=r.concat(i)),l&&a&&(s.fallback=W(l,a))}return s},dn=g.createContext({}),fn="$inf$",vt=ce&&window.__SWR_DEVTOOLS_USE__,hn=vt?window.__SWR_DEVTOOLS_USE__:[],mn=()=>{vt&&(window.__SWR_DEVTOOLS_REACT__=Ae)},xt=e=>F(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],pn=()=>W(ln,g.useContext(dn)),Sn=e=>(t,s,r)=>e(t,s&&((...i)=>{const[a]=ke(t),[,,,u]=k.get(St);if(a.startsWith(fn))return s(...i);const f=u[a];return m(f)?s(...i):(delete u[a],f)}),r),vn=hn.concat(Sn),xn=e=>function(...s){const r=pn(),[l,i,a]=xt(s),u=un(r,a);let f=e;const{use:S}=u,p=(S||[]).concat(vn);for(let c=p.length;c--;)f=p[c](f);return f(l,i||u.fetcher||null,u)},wn=(e,t,s)=>{const r=t[e]||(t[e]=[]);return r.push(s),()=>{const l=r.indexOf(s);l>=0&&(r[l]=r[r.length-1],r.pop())}},Ln=(e,t)=>(...s)=>{const[r,l,i]=xt(s),a=(i.use||[]).concat(t);return e(r,l,{...i,use:a})};mn();const ye=Ae.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),be={dedupe:!0},gn=(e,t,s)=>{const{cache:r,compare:l,suspense:i,fallbackData:a,revalidateOnMount:u,revalidateIfStale:f,refreshInterval:S,refreshWhenHidden:p,refreshWhenOffline:c,keepPreviousData:o}=s,[h,R,v,$]=k.get(r),[d,le]=ke(e),se=g.useRef(!1),U=g.useRef(!1),b=g.useRef(d),_=g.useRef(t),Y=g.useRef(s),j=()=>Y.current,X=()=>j().isVisible()&&j().isOnline(),[L,Q,q,T]=mt(r,d),Z=g.useRef({}).current,ue=m(a)?m(s.fallback)?D:s.fallback[d]:a,Ue=(w,x)=>{for(const C in Z){const E=C;if(E==="data"){if(!l(w[E],x[E])&&(!m(w[E])||!l(fe,x[E])))return!1}else if(x[E]!==w[E])return!1}return!0},He=g.useMemo(()=>{const w=!d||!t?!1:m(u)?j().isPaused()||i?!1:f!==!1:u,x=O=>{const A=W(O);return delete A._k,w?{isValidating:!0,isLoading:!0,...A}:A},C=L(),E=T(),M=x(C),ne=C===E?M:x(E);let y=M;return[()=>{const O=x(L());return Ue(O,y)?(y.data=O.data,y.isLoading=O.isLoading,y.isValidating=O.isValidating,y.error=O.error,y):(y=O,O)},()=>ne]},[r,d]),ee=qt.useSyncExternalStore(g.useCallback(w=>q(d,(x,C)=>{Ue(C,x)||w()}),[r,d]),He[0],He[1]),We=!se.current,wt=h[d]&&h[d].length>0,te=ee.data,G=m(te)?ue&&ht(ue)?ye(ue):ue:te,de=ee.error,pe=g.useRef(G),fe=o?m(te)?m(pe.current)?G:pe.current:te:G,Be=wt&&!m(de)?!1:We&&!m(u)?u:j().isPaused()?!1:i?m(G)?!1:f:m(G)||f,ze=!!(d&&t&&We&&Be),gt=m(ee.isValidating)?ze:ee.isValidating,jt=m(ee.isLoading)?ze:ee.isLoading,re=g.useCallback(async w=>{const x=_.current;if(!d||!x||U.current||j().isPaused())return!1;let C,E,M=!0;const ne=w||{},y=!v[d]||!ne.dedupe,O=()=>Ze?!U.current&&d===b.current&&se.current:d===b.current,A={isValidating:!1,isLoading:!1},qe=()=>{Q(A)},Ge=()=>{const V=v[d];V&&V[1]===E&&delete v[d]},Je={isValidating:!0};m(L().data)&&(Je.isLoading=!0);try{if(y&&(Q(Je),s.loadingTimeout&&m(L().data)&&setTimeout(()=>{M&&O()&&j().onLoadingSlow(d,s)},s.loadingTimeout),v[d]=[x(le),Ie()]),[C,E]=v[d],C=await C,y&&setTimeout(Ge,s.dedupingInterval),!v[d]||v[d][1]!==E)return y&&O()&&j().onDiscarded(d),!1;A.error=D;const V=R[d];if(!m(V)&&(E<=V[0]||E<=V[1]||V[1]===0))return qe(),y&&O()&&j().onDiscarded(d),!1;const N=L().data;A.data=l(N,C)?N:C,y&&O()&&j().onSuccess(C,d,s)}catch(V){Ge();const N=j(),{shouldRetryOnError:Se}=N;N.isPaused()||(A.error=V,y&&O()&&(N.onError(V,d,N),(Se===!0||F(Se)&&Se(V))&&(!j().revalidateOnFocus||!j().revalidateOnReconnect||X())&&N.onErrorRetry(V,d,N,Et=>{const ve=h[d];ve&&ve[0]&&ve[0](Xe,Et)},{retryCount:(ne.retryCount||0)+1,dedupe:!0})))}return M=!1,qe(),!0},[d,r]),$e=g.useCallback((...w)=>pt(r,b.current,...w),[]);if(je(()=>{_.current=t,Y.current=s,m(te)||(pe.current=te)}),je(()=>{if(!d)return;const w=re.bind(D,be);let x=0;j().revalidateOnFocus&&(x=Date.now()+j().focusThrottleInterval);const E=wn(d,h,(M,ne={})=>{if(M==ut){const y=Date.now();j().revalidateOnFocus&&y>x&&X()&&(x=y+j().focusThrottleInterval,w())}else if(M==dt)j().revalidateOnReconnect&&X()&&w();else{if(M==ft)return re();if(M==Xe)return re(ne)}});return U.current=!1,b.current=d,se.current=!0,Q({_k:le}),Be&&(m(G)||ie?w():tn(w)),()=>{U.current=!0,E()}},[d]),je(()=>{let w;function x(){const E=F(S)?S(L().data):S;E&&w!==-1&&(w=setTimeout(C,E))}function C(){!L().error&&(p||j().isVisible())&&(c||j().isOnline())?re(be).then(x):x()}return x(),()=>{w&&(clearTimeout(w),w=-1)}},[S,p,c,d]),g.useDebugValue(fe),i&&m(G)&&d){if(!Ze&&ie)throw new Error("Fallback data is required when using Suspense in SSR.");_.current=t,Y.current=s,U.current=!1;const w=$[d];if(!m(w)){const x=$e(w);ye(x)}if(m(de)){const x=re(be);m(fe)||(x.status="fulfilled",x.value=!0),ye(x)}else throw de}return{mutate:$e,get data(){return Z.data=!0,fe},get error(){return Z.error=!0,de},get isValidating(){return Z.isValidating=!0,gt},get isLoading(){return Z.isLoading=!0,jt}}},jn=xn(gn);async function Pe(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}async function En(e){return(await Pe(e)).text()}async function Rn(e){return(await Pe(e)).arrayBuffer()}async function Fn(e){return(await Pe(e)).json()}async function yn(){const t=(await En("node-ids.txt")).split(`
`);let s;const r=await Rn("links.bin"),l=new DataView(r),i=[];for(let u=0;u<l.byteLength;u+=4){const f=l.getInt32(u,!0);if(f<0)s=-f-1;else{const S=f-1;i.push([t[s],t[S]])}}const a={};for(let u=0,f=i.length;u<f;u++){const[S,p]=i[u];a[S]??(a[S]=[]),a[S].push(p)}return a}function bn(){const e=B(),{val:t,recentlyVisited:s}=e,{data:r,isLoading:l,error:i}=jn("graph",()=>yn(),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),[a,u]=P("showSimilar",!0),[f,S]=P("showMoreSimilar",!0),p=Object.fromEntries(s.map(c=>[c.name,c]));return Fe(t)?null:n.jsxs(ae,{children:[n.jsxs("div",{children:["Similar subreddits:",n.jsx(I,{onClick:()=>{u(!a)},children:a?n.jsx(at,{className:"inline"}):n.jsx(ct,{className:"inline"})}),n.jsx(I,{className:"ml-1",onClick:()=>{S(!f)},children:f?"Show less":"Show more"})]}),a?n.jsxs("div",{children:[l?n.jsx("div",{children:"Loading"}):null,i?n.jsx("div",{className:"text-error",children:`${i}`}):null,r?n.jsx("div",{children:[...new Set(r[J(t).replace("r/","")]??[])].map(c=>`/r/${c}`).sort((c,o)=>{var h,R;return((((h=p[J(c)])==null?void 0:h.visitedCount)??0)-(((R=p[J(o)])==null?void 0:R.visitedCount)??0))*-1}).slice(0,f?1e3:7).map(c=>{var o;return n.jsx(oe,{to:c,children:n.jsxs(K,{children:["- ",J(c)," (",((o=p[J(c)])==null?void 0:o.visitedCount)??0,")"]})},c)})}):null]}):null]})}function Cn({children:e}){return n.jsx("div",{className:"mt-3 mb-20",children:e})}function On({children:e}){const t=B();return n.jsx(rt,{open:!0,onClose:()=>{t.setSidebarOpen(!1)},children:n.jsx("div",{className:"w-screen h-screen",children:e})})}function Dn({children:e}){return st()?n.jsx(On,{children:e}):n.jsx(Cn,{children:e})}function An(){const e=st();return n.jsxs(Dn,{children:[e?n.jsx(Ct,{}):null,n.jsx(bn,{}),n.jsx(Wt,{}),n.jsx(Bt,{}),n.jsx(kt,{}),n.jsx(Lt,{})]})}export{In as B,Mn as F,fn as I,An as S,D as U,k as a,mt as b,St as c,je as d,ke as e,F as f,Tt as g,m as i,Fn as m,qt as s,jn as u,Ln as w};
//# sourceMappingURL=Sidebar-BP8f8Amf.js.map
