const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SavedPostFeed-ClzsWuBK.js","./index-By8J21KZ.js","./index-CKLVmWrM.css","./LoadingSpinner-B7D_tZsK.js","./BaseDialog-DkpQWDf0.js","./Link-BlZymjVQ.js","./formatDistanceToNowStrict-B7etE4jS.js","./en-US-DK8Z8mF7.js","./RedditPostFeed-DCxeOGiL.js","./EditFeedDialog-Cd4tuqpv.js"])))=>i.map(i=>d[i]);
import{u as A,j as n,r as R,_ as Ae,G as ie,L as K,M as jt,a as Rt,B as V,b as M,i as re,n as P,c as gt,R as ke,d as rt,S as yt}from"./index-By8J21KZ.js";import{F as pe,a as we,B as Et}from"./BaseDialog-DkpQWDf0.js";const bt=R.lazy(()=>Ae(()=>import("./SavedPostFeed-ClzsWuBK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),Ct=R.lazy(()=>Ae(()=>import("./RedditPostFeed-DCxeOGiL.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));function _n(){const e=A(),{val:t}=e;return n.jsx(R.Suspense,{fallback:null,children:t==="savedposts"?n.jsx(bt,{}):n.jsx(Ct,{})})}function Ot(e){return ie({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function it(e){return ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function ot(e){return ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function _t(e){return ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Dt(e){return ie({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Vt(e){return ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function W({children:e,onClick:t}){return n.jsx("div",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer whitespace-nowrap",onClick:t,children:e})}function Y({children:e}){return n.jsx("div",{className:"border-b border-r-slate-600 pb-2 pt-2",children:e})}function Tt(){const e=A();return n.jsxs(Y,{children:[n.jsx(K,{to:"/savedposts",children:n.jsxs(W,{children:[n.jsx(_t,{className:"inline"})," Saved posts"]})}),n.jsxs(W,{onClick:()=>{e.setCurrentlyOpenDialog("multi")},children:[n.jsx(Dt,{className:"inline"})," Make list"]}),n.jsxs(W,{onClick:()=>{e.setCurrentlyOpenDialog("blocked")},children:[n.jsx(jt,{className:"inline"})," Blocked users"]}),n.jsxs(W,{onClick:()=>{e.setCurrentlyOpenDialog("about")},children:[n.jsx(Rt,{className:"inline"})," About"]})]})}function Nt({children:e,onClick:t}){return n.jsx("span",{className:"hover:bg-gray-300 dark:hover:bg-gray-600 cursor-pointer m-1 whitespace-nowrap",onClick:t,children:e})}const It=R.lazy(()=>Ae(()=>import("./EditFeedDialog-Cd4tuqpv.js"),__vite__mapDeps([9,1,2,4]),import.meta.url));function Mt({feed:e}){const t=A(),[s,i]=R.useState(!1);return n.jsxs("div",{children:[n.jsx(K,{to:`/r/${e.subreddits.join("+")}`,children:n.jsxs(Nt,{children:["- ",e.name]})}),n.jsx(V,{onClick:()=>{i(!0)},children:n.jsx(Ot,{})}),n.jsx(V,{onClick:()=>{t.removeFeed(e.name)},children:n.jsx(Vt,{})}),s?n.jsx(R.Suspense,{fallback:null,children:n.jsx(It,{onClose:()=>{i(!1)},feed:e})}):null]})}function Lt(){const e=A(),{feeds:t}=e,[s,i]=M("showFeeds",!0);return t.length>0?n.jsxs(Y,{children:[n.jsxs("div",{children:["Feeds:"," ",n.jsx(V,{onClick:()=>{i(!s)},children:s?n.jsx(it,{className:"inline"}):n.jsx(ot,{className:"inline"})})]}),s?t.map(l=>n.jsx(Mt,{feed:l},l.name)):null]}):null}function Ft(){const e=A(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(r=>`r/${r.subreddits.join("+")}`)),[i,l]=M("showRecentlyVisitedSubreddits",!0),[o,c]=M("showMoreRecentlyVisitedSubreddits",!0),a=t.filter(r=>!re(r.name)).slice(0,o?1e3:7).filter(r=>!s.has(r.name));return n.jsxs(Y,{children:[n.jsxs("div",{className:"flex gap-1",children:["Recently visited subs:",n.jsx(V,{onClick:()=>{l(!i)},children:i?n.jsx(pe,{className:"inline"}):n.jsx(we,{className:"inline"})}),n.jsx(V,{onClick:()=>{c(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx("div",{children:a.length>0?a.map(r=>n.jsx(K,{to:r.name,children:n.jsxs(W,{children:["- ",P(r.name)," (",r.visitedCount,")"]})},r.name)):"No items"}):null]})}function At(){const e=A(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(r=>`r/${r.subreddits.join("+")}`)),[i,l]=M("showRecentlyVisitedUsers",!0),[o,c]=M("showMoreRecentlyVisitedUsers",!0),a=t.filter(r=>re(r.name)).slice(0,o?1e3:7).filter(r=>!s.has(r.name));return n.jsxs(Y,{children:[n.jsxs("div",{className:"flex gap-1",children:["Recently visited users:",n.jsx(V,{onClick:()=>{l(!i)},children:i?n.jsx(pe,{className:"inline"}):n.jsx(we,{className:"inline"})}),n.jsx(V,{onClick:()=>{c(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx("div",{children:a.length>0?a.map(r=>n.jsx(K,{to:r.name,children:n.jsxs(W,{children:["- ",P(r.name)," (",r.visitedCount,")"]})},r.name)):"No items"}):null]})}function kt(){const e=A(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(a=>`r/${a.subreddits.join("+")}`)),[i,l]=M("showRecentlyVisitedSubreddits",!0),[o,c]=M("showMoreRecentlyVisitedSubreddits",!0);return n.jsxs(Y,{children:[n.jsxs("div",{className:"flex gap-1",children:["Most visited subs",n.jsx(V,{onClick:()=>{l(!i)},children:i?n.jsx(pe,{className:"inline"}):n.jsx(we,{className:"inline"})}),n.jsx(V,{onClick:()=>{c(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx("div",{children:t.filter(a=>!re(a.name)).sort((a,r)=>r.visitedCount-a.visitedCount).slice(0,o?1e3:7).filter(a=>!s.has(a.name)).length>0?t.filter(a=>!re(a.name)).sort((a,r)=>r.visitedCount-a.visitedCount).slice(0,o?1e3:7).filter(a=>!s.has(a.name)).map(a=>n.jsx(K,{to:a.name,children:n.jsxs(W,{children:["- ",P(a.name)," (",a.visitedCount,")"]})},a.name)):"No items"}):null]})}function Ut(){const e=A(),{recentlyVisited:t}=e,s=new Set(e.feeds.map(r=>`r/${r.subreddits.join("+")}`)),[i,l]=M("showRecentlyVisitedUsers",!0),[o,c]=M("showMoreRecentlyVisitedUsers",!0),a=t.filter(r=>re(r.name)).sort((r,v)=>v.visitedCount-r.visitedCount).slice(0,o?1e3:7).filter(r=>!s.has(r.name));return n.jsxs(Y,{children:[n.jsxs("div",{className:"flex gap-1",children:["Most visited users:",n.jsx(V,{onClick:()=>{l(!i)},children:i?n.jsx(pe,{className:"inline"}):n.jsx(we,{className:"inline"})}),n.jsx(V,{onClick:()=>{c(!o)},children:o?"Show less":"Show more"})]}),i?n.jsx("div",{children:a.length>0?a.map(r=>n.jsx(K,{to:r.name,children:n.jsxs(W,{children:["- ",P(r.name)," (",r.visitedCount,")"]})},r.name)):"No items"}):null]})}var Re={exports:{}},ge={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xe;function Pt(){if(Xe)return ge;Xe=1;var e=gt();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var s=typeof Object.is=="function"?Object.is:t,i=e.useState,l=e.useEffect,o=e.useLayoutEffect,c=e.useDebugValue;function a(u,f){var m=f(),y=i({inst:{value:m,getSnapshot:f}}),S=y[0].inst,B=y[1];return o(function(){S.value=m,S.getSnapshot=f,r(S)&&B({inst:S})},[u,m,f]),l(function(){return r(S)&&B({inst:S}),u(function(){r(S)&&B({inst:S})})},[u]),c(m),m}function r(u){var f=u.getSnapshot;u=u.value;try{var m=f();return!s(u,m)}catch{return!0}}function v(u,f){return f()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:a;return ge.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,ge}var Qe;function Ht(){return Qe||(Qe=1,Re.exports=Pt()),Re.exports}var Wt=Ht();const at=0,ct=1,lt=2,Ze=3;var et=Object.prototype.hasOwnProperty;function De(e,t){var s,i;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((i=e.length)===t.length)for(;i--&&De(e[i],t[i]););return i===-1}if(!s||typeof e=="object"){i=0;for(s in e)if(et.call(e,s)&&++i&&!et.call(t,s)||!(s in t)||!De(e[s],t[s]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}const H=new WeakMap,z=()=>{},_=z(),Ve=Object,h=e=>e===_,F=e=>typeof e=="function",q=(e,t)=>({...e,...t}),ut=e=>F(e.then),ye={},me={},Ue="undefined",le=typeof window!=Ue,Te=typeof document!=Ue,$t=le&&"Deno"in window,zt=()=>le&&typeof window.requestAnimationFrame!=Ue,dt=(e,t)=>{const s=H.get(e);return[()=>!h(t)&&e.get(t)||ye,i=>{if(!h(t)){const l=e.get(t);t in me||(me[t]=l),s[5](t,q(l,i),l||ye)}},s[6],()=>!h(t)&&t in me?me[t]:!h(t)&&e.get(t)||ye]};let Ne=!0;const qt=()=>Ne,[Ie,Me]=le&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[z,z],Bt=()=>{const e=Te&&document.visibilityState;return h(e)||e!=="hidden"},Gt=e=>(Te&&document.addEventListener("visibilitychange",e),Ie("focus",e),()=>{Te&&document.removeEventListener("visibilitychange",e),Me("focus",e)}),Jt=e=>{const t=()=>{Ne=!0,e()},s=()=>{Ne=!1};return Ie("online",t),Ie("offline",s),()=>{Me("online",t),Me("offline",s)}},Kt={isOnline:qt,isVisible:Bt},Yt={initFocus:Gt,initReconnect:Jt},tt=!ke.useId,ce=!le||$t,Xt=e=>zt()?window.requestAnimationFrame(e):setTimeout(e,1),Ee=ce?R.useEffect:R.useLayoutEffect,be=typeof navigator<"u"&&navigator.connection,nt=!ce&&be&&(["slow-2g","2g"].includes(be.effectiveType)||be.saveData),Se=new WeakMap,Ce=(e,t)=>Ve.prototype.toString.call(e)===`[object ${t}]`;let Qt=0;const Le=e=>{const t=typeof e,s=Ce(e,"Date"),i=Ce(e,"RegExp"),l=Ce(e,"Object");let o,c;if(Ve(e)===e&&!s&&!i){if(o=Se.get(e),o)return o;if(o=++Qt+"~",Se.set(e,o),Array.isArray(e)){for(o="@",c=0;c<e.length;c++)o+=Le(e[c])+",";Se.set(e,o)}if(l){o="#";const a=Ve.keys(e).sort();for(;!h(c=a.pop());)h(e[c])||(o+=c+":"+Le(e[c])+",");Se.set(e,o)}}else o=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},Pe=e=>{if(F(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Le(e):"",[e,t]};let Zt=0;const Fe=()=>++Zt;async function ft(...e){const[t,s,i,l]=e,o=q({populateCache:!0,throwOnError:!0},typeof l=="boolean"?{revalidate:l}:l||{});let c=o.populateCache;const a=o.rollbackOnError;let r=o.optimisticData;const v=f=>typeof a=="function"?a(f):a!==!1,x=o.throwOnError;if(F(s)){const f=s,m=[],y=t.keys();for(const S of y)!/^\$(inf|sub)\$/.test(S)&&f(t.get(S)._k)&&m.push(S);return Promise.all(m.map(u))}return u(s);async function u(f){const[m]=Pe(f);if(!m)return;const[y,S]=dt(t,m),[B,d,ue,oe]=H.get(t),$=()=>{const N=B[m];return(F(o.revalidate)?o.revalidate(y().data,f):o.revalidate!==!1)&&(delete ue[m],delete oe[m],N&&N[0])?N[0](lt).then(()=>y().data):y().data};if(e.length<3)return $();let b=i,D;const X=Fe();d[m]=[X,0];const j=!h(r),Q=y(),L=Q.data,Z=Q._c,G=h(Z)?L:Z;if(j&&(r=F(r)?r(G,L):r,S({data:r,_c:G})),F(b))try{b=b(G)}catch(N){D=N}if(b&&ut(b))if(b=await b.catch(N=>{D=N}),X!==d[m][0]){if(D)throw D;return b}else D&&j&&v(D)&&(c=!0,S({data:G,_c:_}));if(c&&!D)if(F(c)){const N=c(b,G);S({data:N,error:_,_c:_})}else S({data:b,error:_,_c:_});if(d[m][1]=Fe(),Promise.resolve($()).then(()=>{S({_c:_})}),D){if(x)throw D;return}return b}}const st=(e,t)=>{for(const s in e)e[s][0]&&e[s][0](t)},en=(e,t)=>{if(!H.has(e)){const s=q(Yt,t),i=Object.create(null),l=ft.bind(_,e);let o=z;const c=Object.create(null),a=(x,u)=>{const f=c[x]||[];return c[x]=f,f.push(u),()=>f.splice(f.indexOf(u),1)},r=(x,u,f)=>{e.set(x,u);const m=c[x];if(m)for(const y of m)y(u,f)},v=()=>{if(!H.has(e)&&(H.set(e,[i,Object.create(null),Object.create(null),Object.create(null),l,r,a]),!ce)){const x=s.initFocus(setTimeout.bind(_,st.bind(_,i,at))),u=s.initReconnect(setTimeout.bind(_,st.bind(_,i,ct)));o=()=>{x&&x(),u&&u(),H.delete(e)}}};return v(),[e,l,v,o]}return[e,H.get(e)[4]]},tn=(e,t,s,i,l)=>{const o=s.errorRetryCount,c=l.retryCount,a=~~((Math.random()+.5)*(1<<(c<8?c:8)))*s.errorRetryInterval;!h(o)&&c>o||setTimeout(i,a,l)},nn=De,[ht,sn]=en(new Map),rn=q({onLoadingSlow:z,onSuccess:z,onError:z,onErrorRetry:tn,onDiscarded:z,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:nt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:nt?5e3:3e3,compare:nn,isPaused:()=>!1,cache:ht,mutate:sn,fallback:{}},Kt),on=(e,t)=>{const s=q(e,t);if(t){const{use:i,fallback:l}=e,{use:o,fallback:c}=t;i&&o&&(s.use=i.concat(o)),l&&c&&(s.fallback=q(l,c))}return s},an=R.createContext({}),cn="$inf$",mt=le&&window.__SWR_DEVTOOLS_USE__,ln=mt?window.__SWR_DEVTOOLS_USE__:[],un=()=>{mt&&(window.__SWR_DEVTOOLS_REACT__=ke)},St=e=>F(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],dn=()=>q(rn,R.useContext(an)),fn=e=>(t,s,i)=>e(t,s&&((...o)=>{const[c]=Pe(t),[,,,a]=H.get(ht);if(c.startsWith(cn))return s(...o);const r=a[c];return h(r)?s(...o):(delete a[c],r)}),i),hn=ln.concat(fn),mn=e=>function(...s){const i=dn(),[l,o,c]=St(s),a=on(i,c);let r=e;const{use:v}=a,x=(v||[]).concat(hn);for(let u=x.length;u--;)r=x[u](r);return r(l,o||a.fetcher||null,a)},Sn=(e,t,s)=>{const i=t[e]||(t[e]=[]);return i.push(s),()=>{const l=i.indexOf(s);l>=0&&(i[l]=i[i.length-1],i.pop())}},Dn=(e,t)=>(...s)=>{const[i,l,o]=St(s),c=(o.use||[]).concat(t);return e(i,l,{...o,use:c})};un();const Oe=ke.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),_e={dedupe:!0},pn=(e,t,s)=>{const{cache:i,compare:l,suspense:o,fallbackData:c,revalidateOnMount:a,revalidateIfStale:r,refreshInterval:v,refreshWhenHidden:x,refreshWhenOffline:u,keepPreviousData:f}=s,[m,y,S,B]=H.get(i),[d,ue]=Pe(e),oe=R.useRef(!1),$=R.useRef(!1),b=R.useRef(d),D=R.useRef(t),X=R.useRef(s),j=()=>X.current,Q=()=>j().isVisible()&&j().isOnline(),[L,Z,G,N]=dt(i,d),ee=R.useRef({}).current,de=h(c)?h(s.fallback)?_:s.fallback[d]:c,We=(w,p)=>{for(const C in ee){const g=C;if(g==="data"){if(!l(w[g],p[g])&&(!h(w[g])||!l(he,p[g])))return!1}else if(p[g]!==w[g])return!1}return!0},$e=R.useMemo(()=>{const w=!d||!t?!1:h(a)?j().isPaused()||o?!1:r!==!1:a,p=O=>{const k=q(O);return delete k._k,w?{isValidating:!0,isLoading:!0,...k}:k},C=L(),g=N(),I=p(C),se=C===g?I:p(g);let E=I;return[()=>{const O=p(L());return We(O,E)?(E.data=O.data,E.isLoading=O.isLoading,E.isValidating=O.isValidating,E.error=O.error,E):(E=O,O)},()=>se]},[i,d]),te=Wt.useSyncExternalStore(R.useCallback(w=>G(d,(p,C)=>{We(C,p)||w()}),[i,d]),$e[0],$e[1]),ze=!oe.current,pt=m[d]&&m[d].length>0,ne=te.data,J=h(ne)?de&&ut(de)?Oe(de):de:ne,fe=te.error,ve=R.useRef(J),he=f?h(ne)?h(ve.current)?J:ve.current:ne:J,qe=pt&&!h(fe)?!1:ze&&!h(a)?a:j().isPaused()?!1:o?h(J)?!1:r:h(J)||r,Be=!!(d&&t&&ze&&qe),wt=h(te.isValidating)?Be:te.isValidating,vt=h(te.isLoading)?Be:te.isLoading,ae=R.useCallback(async w=>{const p=D.current;if(!d||!p||$.current||j().isPaused())return!1;let C,g,I=!0;const se=w||{},E=!S[d]||!se.dedupe,O=()=>tt?!$.current&&d===b.current&&oe.current:d===b.current,k={isValidating:!1,isLoading:!1},Je=()=>{Z(k)},Ke=()=>{const T=S[d];T&&T[1]===g&&delete S[d]},Ye={isValidating:!0};h(L().data)&&(Ye.isLoading=!0);try{if(E&&(Z(Ye),s.loadingTimeout&&h(L().data)&&setTimeout(()=>{I&&O()&&j().onLoadingSlow(d,s)},s.loadingTimeout),S[d]=[p(ue),Fe()]),[C,g]=S[d],C=await C,E&&setTimeout(Ke,s.dedupingInterval),!S[d]||S[d][1]!==g)return E&&O()&&j().onDiscarded(d),!1;k.error=_;const T=y[d];if(!h(T)&&(g<=T[0]||g<=T[1]||T[1]===0))return Je(),E&&O()&&j().onDiscarded(d),!1;const U=L().data;k.data=l(U,C)?U:C,E&&O()&&j().onSuccess(C,d,s)}catch(T){Ke();const U=j(),{shouldRetryOnError:xe}=U;U.isPaused()||(k.error=T,E&&O()&&(U.onError(T,d,U),(xe===!0||F(xe)&&xe(T))&&(!j().revalidateOnFocus||!j().revalidateOnReconnect||Q())&&U.onErrorRetry(T,d,U,xt=>{const je=m[d];je&&je[0]&&je[0](Ze,xt)},{retryCount:(se.retryCount||0)+1,dedupe:!0})))}return I=!1,Je(),!0},[d,i]),Ge=R.useCallback((...w)=>ft(i,b.current,...w),[]);if(Ee(()=>{D.current=t,X.current=s,h(ne)||(ve.current=ne)}),Ee(()=>{if(!d)return;const w=ae.bind(_,_e);let p=0;j().revalidateOnFocus&&(p=Date.now()+j().focusThrottleInterval);const g=Sn(d,m,(I,se={})=>{if(I==at){const E=Date.now();j().revalidateOnFocus&&E>p&&Q()&&(p=E+j().focusThrottleInterval,w())}else if(I==ct)j().revalidateOnReconnect&&Q()&&w();else{if(I==lt)return ae();if(I==Ze)return ae(se)}});return $.current=!1,b.current=d,oe.current=!0,Z({_k:ue}),qe&&(h(J)||ce?w():Xt(w)),()=>{$.current=!0,g()}},[d]),Ee(()=>{let w;function p(){const g=F(v)?v(L().data):v;g&&w!==-1&&(w=setTimeout(C,g))}function C(){!L().error&&(x||j().isVisible())&&(u||j().isOnline())?ae(_e).then(p):p()}return p(),()=>{w&&(clearTimeout(w),w=-1)}},[v,x,u,d]),R.useDebugValue(he),o&&h(J)&&d){if(!tt&&ce)throw new Error("Fallback data is required when using Suspense in SSR.");D.current=t,X.current=s,$.current=!1;const w=B[d];if(!h(w)){const p=Ge(w);Oe(p)}if(h(fe)){const p=ae(_e);h(he)||(p.status="fulfilled",p.value=!0),Oe(p)}else throw fe}return{mutate:Ge,get data(){return ee.data=!0,he},get error(){return ee.error=!0,fe},get isValidating(){return ee.isValidating=!0,wt},get isLoading(){return ee.isLoading=!0,vt}}},wn=mn(pn);async function He(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}async function vn(e){return(await He(e)).text()}async function xn(e){return(await He(e)).arrayBuffer()}async function Vn(e){return(await He(e)).json()}async function jn(){const t=(await vn("node-ids.txt")).split(`
`);let s;const i=await xn("links.bin"),l=new DataView(i),o=[];for(let a=0;a<l.byteLength;a+=4){const r=l.getInt32(a,!0);if(r<0)s=-r-1;else{const v=r-1;o.push([t[s],t[v]])}}const c={};for(let a=0,r=o.length;a<r;a++){const[v,x]=o[a];c[v]??(c[v]=[]),c[v].push(x)}return c}function Rn(){const e=A(),{val:t,recentlyVisited:s}=e,{data:i,isLoading:l,error:o}=wn("graph",()=>jn(),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),[c,a]=M("showSimilar",!0),[r,v]=M("showMoreSimilar",!0),x=Object.fromEntries(s.map(u=>[u.name,u]));return re(t)?null:n.jsxs(Y,{children:[n.jsxs("div",{children:["Similar subreddits:",n.jsx(V,{onClick:()=>{a(!c)},children:c?n.jsx(it,{className:"inline"}):n.jsx(ot,{className:"inline"})}),n.jsx(V,{className:"ml-1",onClick:()=>{v(!r)},children:r?"Show less":"Show more"})]}),c?n.jsxs("div",{children:[l?n.jsx("div",{children:"Loading"}):null,o?n.jsx("div",{className:"text-error",children:`${o}`}):null,i?n.jsx("div",{children:[...new Set(i[P(t).replace("r/","")]??[])].map(u=>`/r/${u}`).sort((u,f)=>{var m,y;return((((m=x[P(u)])==null?void 0:m.visitedCount)??0)-(((y=x[P(f)])==null?void 0:y.visitedCount)??0))*-1}).slice(0,r?1e3:7).map(u=>{var f;return n.jsx(K,{to:u,children:n.jsxs(W,{children:["- ",P(u)," (",((f=x[P(u)])==null?void 0:f.visitedCount)??0,")"]})},u)})}):null]}):null]})}function gn({children:e}){return n.jsx("div",{className:"mt-3 mb-20",children:e})}function yn({children:e}){const t=A();return n.jsx(Et,{open:!0,onClose:()=>{t.setSidebarOpen(!1)},children:n.jsx("div",{className:"w-screen h-screen",children:e})})}function En({children:e}){return rt()?n.jsx(yn,{children:e}):n.jsx(gn,{children:e})}function Tn(){const e=rt();return n.jsxs(En,{children:[e?n.jsx(yt,{}):null,n.jsx(Rn,{}),n.jsx(kt,{}),n.jsx(Ut,{}),n.jsx(Ft,{}),n.jsx(At,{}),n.jsx(Lt,{}),n.jsx(Tt,{})]})}export{_n as F,cn as I,Tn as S,_ as U,H as a,dt as b,ht as c,Ee as d,Pe as e,F as f,_t as g,h as i,Vn as m,Wt as s,wn as u,Dn as w};
//# sourceMappingURL=Sidebar-DtkFwZes.js.map
